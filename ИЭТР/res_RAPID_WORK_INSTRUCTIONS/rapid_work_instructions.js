/*! RAPID_WORK_INSTRUCTIONS bundle, Copyright (c) 2011-2017 Paragraphics */
var cortona3d=function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(1),n(2),t.exports=n(6)},function(t,e,n){t.exports=n.p+"../interactivity-xml-to-html.xsl"},function(t,e){},,function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=d[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(a(i.parts[r],e))}else{for(var s=[],r=0;r<i.parts.length;r++)s.push(a(i.parts[r],e));d[i.id]={id:i.id,refs:1,parts:s}}}}function o(t){for(var e=[],n={},i=0;i<t.length;i++){var o=t[i],r=o[0],s=o[1],a=o[2],c=o[3],l={css:s,media:a,sourceMap:c};n[r]?n[r].parts.push(l):e.push(n[r]={id:r,parts:[l]})}return e}function r(){var t=document.createElement("style"),e=f();return t.type="text/css",e.appendChild(t),t}function s(){var t=document.createElement("link"),e=f();return t.rel="stylesheet",e.appendChild(t),t}function a(t,e){var n,i,o;if(e.singleton){var a=v++;n=m||(m=r()),i=c.bind(null,n,a,!1),o=c.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(),i=u.bind(null,n),o=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=r(),i=l.bind(null,n),o=function(){n.parentNode.removeChild(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}function c(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=_(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function l(t,e){var n=e.css,i=e.media;e.sourceMap;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function u(t,e){var n=e.css,i=(e.media,e.sourceMap);i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var d={},h=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},p=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),f=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,v=0;t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=p());var n=o(t);return i(n,e),function(t){for(var r=[],s=0;s<n.length;s++){var a=n[s],c=d[a.id];c.refs--,r.push(c)}if(t){var l=o(t);i(l,e)}for(var s=0;s<r.length;s++){var c=r[s];if(0===c.refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete d[c.id]}}}};var _=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){n(7);var i=n(8);t.exports=i.expand({loadSpecIDCSS:n(9),scene:n(10),interfaces:{solo:{SimulationAPI:n(14).SimulationAPI},viewer3d:{SimulationAPI:n(16).SimulationAPI}},factory:{fps:n(17),popupmenu:n(18),alert:n(24),error:n(27),loading:n(28),svg:n(32),solo:n(34),isoview:n(39),viewer2d:n(41),viewer3d:n(42)},app:n(43)},i),n(49)},function(t,e,n){t.exports=n.p+"../cgm-to-svg.xsl"},function(t,e){function n(t){function e(){}return e.prototype=t.prototype||t,new e}function i(t,e,n){function i(){}if(t&&(i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.superClass=t),n)for(var o in n)n.hasOwnProperty(o)&&(e.prototype[o]=n[o]);return e}function o(t,e){for(var n in e)e.hasOwnProperty(n)&&(n in t?"function"==typeof t[n]&&"function"==typeof e[n]?t[n]=e[n]:t[n]instanceof Object&&e[n]instanceof Object&&e[n]!=={}?o(t[n],e[n]):t[n]=e[n]:t[n]=e[n]);return t}function r(t,e,n){return t+256*e+65536*n}function s(t){return"number"==typeof t?t:"string"==typeof t&&t.match(/^#?([0-9A-F]{6})$/i)?parseInt(RegExp.$1.substr(4,2)+RegExp.$1.substr(2,2)+RegExp.$1.substr(0,2),16):0}function a(t,e,n){var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",t),e&&i.setAttribute("async","async"),i.onload=n,document.getElementsByTagName("head")[0].appendChild(i)}function c(t,e){var n=document.createElement("link");n.href=t,n.rel="stylesheet",n.type="text/css",n.onload=e,document.getElementsByTagName("head")[0].appendChild(n)}t.exports={extend:n,defineClass:i,expand:o,RGB:r,fromHTMLColor:s,loadScript:a,loadStyleSheet:c}},function(t,e,n){function i(t,e){for(var n=!1,i=new RegExp(t+"\\.css","i"),r=document.getElementsByTagName("link"),s=0;s<r.length&&!n;s++){var a=r[s].getAttribute("href");a&&(n=i.test(a))}return n?e():(document.body.style.visibility="hidden",o.loadStyleSheet(t+".css",function(){document.body.style.visibility="visible",e()})),n}var o=n(8);t.exports=i},function(t,e,n){t.exports=n(11)},function(t,e,n){var i=n(8).defineClass,o=n(12),r=n(13),s={},a=i(null,function(t){if(!t)return null;var e=t;if("string"==typeof t?t=document.getElementById(t):e=t.getAttribute("id"),!e){e="__cortona3d-container-1";for(var n=1;document.getElementById(e);n++)e="__cortona3d-container-"+n;t.setAttribute("id",e)}return e in s||(t.classList&&t.classList.add("cortona3d-container"),s[e]=this instanceof a?this:new a(e),this.container=t),s[e]},{add:function(){for(var t=arguments.length-1;t>=0;t--){var e=arguments[t];e instanceof o&&(e=e.factory),e instanceof r&&(this[e.type]=e.create(this))}return this},remove:function(){for(var t=arguments.length-1;t>=0;t--){var e=arguments[t];e instanceof o&&(e=e.factory),e instanceof r&&(e.destroy(this),delete this[e.type])}return this},destroy:function(){var t=this.container.getAttribute("id"),e=s[t];for(var n in e)e[n]instanceof o&&e.remove(e[n].factory);this.container.classList&&this.container.classList.remove("cortona3d-container"),delete s[t]}});t.exports=a},function(t,e,n){var i=n(8).defineClass,o=i(null,function(t){this.factory=t,this.instance=null,this.invalid=!1,this.events=[]},{isValid:function(){return!!this.instance&&!this.invalid},attach:function(){return this},detach:function(){return this},trigger:function(t,e,n){var i=!1,o=null;if(n=void 0===n?this.instance:n,e=e||{raw:[],src:null},e instanceof Object&&(e.targetControl=this),"function"==typeof window.Event?o=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}):document.createEvent?(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!0,!0,e)):console.error("ERROR: Browser does not support DOM L3/L4 events specification"),o)try{i=n.dispatchEvent(o)}catch(e){console.error("dispatchEvent('"+t+"') exception: "+e.message)}return i},show:function(){if(this.instance){var t=this.instance.style;t.width=t.height="100%",t.marginLeft=""}return this},hide:function(){if(this.instance){var t=this.instance.style;t.width=t.height="1px",t.marginLeft="-10000px"}return this},load:function(t){return this},unload:function(){return this},version:function(){}});t.exports=o},function(t,e,n){var i=n(8).defineClass,o=i(null,function(t,e){console.assert("string"==typeof t,"WARNING: C3DControlFactory type not a string."),this.type=t,this.events=e&&e instanceof Array?e:[]},{create:function(t){},destroy:function(t){if(void 0!==t[this.type]){t[this.type].detach();var e=t[this.type].instance;e&&e.parentNode&&e.parentNode.removeChild(e)}},getNextId:function(){for(var t=1;document.getElementById(this.type+t);)t++;return this.type+t}});t.exports=o},function(t,e,n){function i(){}function o(){if(this.m_procedureDuration){var t=this.control3d.range;t.disabled=!0,t.min=100*this.procedure.getPlayableRangeStartTime()/this.m_procedureDuration,t.max=100*this.procedure.getPlayableRangeStopTime()/this.m_procedureDuration,t.disabled=!1}}var r=n(8).defineClass,s=n(15).SimulationAPIBase,a=r(s,function(t){var e=a.superClass.call(this,t);return e===this&&(this.AUTOSTOP={PROCEDURE:0,STEP:1,SUBSTEP:2},this.m_procedureDuration=0,this.m_procedurePosition=0,this.m_substepPath=new Array(3),this.m_substepPathPrev=new Array(3),this.m_autostopMode=this.AUTOSTOP.PROCEDURE,this.attach()),e},{load:function(t){this.control3d.load(t)},scene_loaded_on_start:i,vcr_play:function(){this.procedure&&(this.procedure.requestPlayerState(),this.procedure.play())},vcr_play_ext:function(){this.vcr_play()},vcr_stop:function(){if(this.procedure){var t=this.procedure.getPlayableRangeStartTime(),e=this.procedure.getPlayableRangeStopTime(),n=.001;t>n||Math.abs(this.m_procedureDuration-e)>n?this.procedure.setPlayPosition(t,!0):this.procedure.stop()}},vcr_pause:function(){this.procedure&&this.procedure.pause()},set_ui_smoothcontrol:function(t){this.control3d.toggleRangeControl(t)},set_ui_axis:i,set_ui_vcr:i,set_ui_zoom:i,vcr_goto:function(t){this.procedure&&(this.procedure.setPlayRange(t,t,5),o.call(this))},vcr_next_step:function(){this.procedure&&(this.procedure.forward(),o.call(this))},vcr_previous_step:function(){this.procedure&&(this.procedure.backward(),o.call(this))},set_speed_ratio:function(t){this.procedure&&this.procedure.setPlaybackSpeed(+t)},set_freeze_viewpoint:function(t){this.procedure&&this.procedure.freezeCamera(!!t)},vcr_set_position:function(t){this.procedure&&(this.procedure.seekToSubstep(t),o.call(this))},vcr_set_proc_fraction:function(t,e){this.procedure&&this.procedure.setPlayPosition(t*this.m_procedureDuration,!!e)},vcr_set_seek_position:function(t,e){if(this.procedure){var n=this.procedure.getPlayableRangeStartTime()+t*(this.procedure.getPlayableRangeStopTime()-this.procedure.getPlayableRangeStartTime());this.procedure.setPlayPosition(n,!!e)}},set_autostop_mode:function(t){this.m_autostopMode=t||0},fit_to_object:function(t){if(this.solo){var e=this.solo.app;e.fitObjectsInView(e.getObjectWithName(t),!0)}},fit_to_objects:function(t){if(this.solo){var e=this.solo.app;e.fitObjectsInView(t.map(function(t){return e.getObjectWithName(t)}),!0)}},flash_node:function(t){if(this.solo){var e=this.solo.app,n=e.getObjectWithName(t);e.setObjectPropertyf(n,0,!0,1,.8,0),e.setObjectPropertyf(n,1,!0,.278,.22,0),setTimeout(function(){e.restoreObjectProperty(n,0,!0),e.restoreObjectProperty(n,1,!0)},1e3)}},flash_nodes:function(t){var e=this;t.map(function(t){e.flash_node(t)})},set_emissiveColor:function(t,e,n,i){if(this.solo){var o=this.solo.app;t.map(function(t){o.setObjectPropertyf(o.getObjectWithName(t),1,!1,e,n,i)})}},vcr_set_range:function(t,e){this.procedure&&(this.procedure.setPlayRange(t,e,4),o.call(this))},vcr_get_fraction:function(){if(this.procedure){var t=this.procedure.getPlayableRangeStopTime()-this.procedure.getPlayableRangeStartTime();return Math.min(1,Math.max(0,(this.m_procedurePosition-this.procedure.getPlayableRangeStartTime())/t).toFixed(3))}},vcr_get_proc_fraction:function(){return Math.min(1,(this.m_procedurePosition/this.m_procedureDuration).toFixed(3))},vcr_get_step_fraction:function(){return this.vcr_get_fraction()},attach:function(){if(!this.defaultHandler){var t,e,n=this;this.defaultHandler=function(i){switch(i.type){case"OnReady":n.solo=n.control3d.solo,n.procedure=n.solo.app.procedure;break;case"OnSceneLoaded":var o=!1;if(i.detail.raw[0]&&"procedure"==i.detail.src.type){n.m_procedureDuration=i.detail.src.duration,n.solo.app.configureInstance(n.solo.app.DISABLE_PROCEDURE_TEXT_EMISSION,0),n.procedure.didFireEvent=function(t,e,i,o){setTimeout(function(){n._trigger(n.on_events_out,[[{id:e,title:i,info:o}]]),n._trigger(n.on_alert,[e])},0)},n.procedure.didChangePlayerState=function(t,e){n.m_procedurePosition=t,setTimeout(function(){if(n.m_procedureDuration){var t=Math.max(0,Math.min(1,n.m_procedurePosition/n.m_procedureDuration)),i=Math.max(0,Math.min(1,(n.m_procedurePosition-n.procedure.getPlayableRangeStartTime())/(n.procedure.getPlayableRangeStopTime()-n.procedure.getPlayableRangeStartTime()))),o=n.control3d.range;o.value=100*t,n._trigger(n.on_proc_fraction_changed,[t]),n._trigger(n.on_seek_position_changed,[i])}e=256===e?n.STOP:1&e?n.PLAY:n.PAUSE,e!==n.state&&(n._trigger(n.on_vcr_state,[e]),n.state=e)},0)},n.procedure.didEnterSubstep=function(t){n.m_substepPath=t.reverse()},n.procedure.didEnterSubstepWithName=function(t){var e=new Array(3);switch(e[2]=t,0!==n.m_substepPath.length&&n.m_substepPath[n.m_substepPath.length-1]!==t&&n.m_substepPath.push(t),e[1]=n.m_substepPath[0],setTimeout(function(){n._trigger(n.on_start_substep,e),n._trigger(n.on_start_new_substep,e)},0),n.m_autostopMode){case n.AUTOSTOP.STEP:n.m_substepPath[0]!==n.m_substepPathPrev[0]&&n.vcr_pause();break;case n.AUTOSTOP.SUBSTEP:n.m_substepPath[n.m_substepPath-1]!==n.m_substepPathPrev[n.m_substepPathPrev-1]&&n.vcr_pause()}n.m_substepPathPrev=n.m_substepPath};var r=n.procedure.getOption("3DBackgroundColor");r&&n.solo.app.setDefaultBackgroundColors(r),o=!0}n._trigger(n.on_simulation_load,[o]);break;case"MouseDown":t=i.detail.raw[0],e=i.detail.raw[1];break;case"MouseUp":var s=i.detail.raw[2],a=i.detail.raw[3];if(1===t&&4&e){var c=n.solo.app.pickObject(s,a);c?(n.solo.app.setRotationCenterToObjects([c.handle]),n.solo.app.fitObjectsInView([c.handle],!0)):(n.solo.app.resetRotationCenter(),n.solo.app.fitSceneInView(!0)),i.detail.src.preventDefault()}}return!0},this.control3d.instance.addEventListener("OnSceneLoaded",this.defaultHandler,!1),this.control3d.instance.addEventListener("OnReady",this.defaultHandler,!1),this.control3d.instance.addEventListener("MouseUp",this.defaultHandler,!1),this.control3d.instance.addEventListener("MouseDown",this.defaultHandler,!1),console.log("SimulationAPI attached")}},detach:function(){this.defaultHandler&&(this.control3d.instance.removeEventListener("OnSceneLoaded",this.defaultHandler,!1),this.control3d.instance.removeEventListener("OnReady",this.defaultHandler,!1),this.control3d.instance.removeEventListener("MouseUp",this.defaultHandler,!1),this.control3d.instance.removeEventListener("MouseDown",this.defaultHandler,!1),delete this.defaultHandler,console.log("SimulationAPI detached"))}});t.exports={SimulationAPI:a}},function(t,e,n){var i=n(8).defineClass,o=function(){console.info("nop"),console.log(arguments),console.trace()},r=i(null,function(t){return r._api||(this.control3d=t,this.STOP=0,this.PLAY=1,this.PAUSE=2,this.state=this.STOP,r._api=this),r._api},{load:o,unload:o,scene_loaded_on_start:o,vcr_play:o,vcr_play_ext:o,vcr_stop:o,vcr_pause:o,vcr_next_substep:o,vcr_previous_substep:o,vcr_next_step:o,vcr_previous_step:o,vcr_goto:o,vcr_set_range:o,vcr_set_position:o,vcr_set_fraction:o,vcr_set_proc_fraction:o,vcr_set_step_fraction:o,vcr_set_seek_position:o,vcr_get_fraction:o,vcr_get_proc_fraction:o,vcr_get_step_fraction:o,get_procedure_id:o,get_step_id:o,get_substep_id:o,set_speed_ratio:o,set_freeze_viewpoint:o,set_mute_audio:o,get_speed_ratio:o,get_freeze_viewpoint:o,set_ui_smoothcontrol:o,set_ui_axis:o,set_ui_vcr:o,set_ui_zoom:o,set_autostop_mode:o,zoom_reset:o,zoom_set_delta:o,zoom_set_level:o,set_guided_zoom:o,set_new_viewpoint:o,get_viewpoint_data:o,fit_to_object:o,fit_to_objects:o,flash_node:o,flash_nodes:o,set_emissiveColor:o,checkVisibility:o,get_steps_array:o,get_substeps_array:o,interactivity_xml_load:o,interactivity_xml_get_task:o,interactivity_xml_get_subtasks:o,set_procedure:o,set_multithread_procedure:o,_trigger:function(t,e){"function"==typeof t&&t.apply(this,e)},attach:o,detach:o});t.exports={SimulationAPIBase:r}},function(t,e){function n(t){return null!==It?It:(this._ver="1.4.0.11",this.STOP=0,this.PLAY=1,this.PAUSE=2,this.auto_stop=!1,this.ATP=0,this.state=0,this.procedure_fraction=0,this.zoom_level=.5,this.seek_position=0,this.id_procedure="",this.id_step="",this.id_substep="",this.ignore_viewpoint_changes=void 0,this.is_loaded=!1,this.cortona=t.instance,this.control_script=null,this._last_alert="",this.isMultiThreadAnimation=!1,this.AnimationThreads="",this.is_nonlinear_mode=!1,this.AllSubSteps=null,void this.attach())}function o(t,e,n,i){var o=""===i;if(It.is_loaded=!1,o){var r=It.cortona.Engine;if(r.ValidateNodes=1,r.AutoRefresh=1,e.Count>0){try{r.RootNodes.Clear(),r.RootNodes.Add(e),It.control_script=r.Nodes.Item("VCR_CONTROL_SCRIPT");var s=It.cortona.skin;It.cortona.skin="{1706B265-E103-4332-9871-7FEE6C37C699}",It.cortona.refresh(),It.cortona.skin=s,It.id_procedure=It.get_procedure_id(),It.id_step=It.get_step_id(),It.id_substep=It.get_substep_id(),It.is_loaded=!0}catch(t){r.RootNodes.Clear()}try{"undefined"==typeof It.ignore_viewpoint_changes&&(It.ignore_viewpoint_changes=!1),It.control_script.Fields.Item("set_ignore_viewpoints").Value=It.ignore_viewpoint_changes}catch(t){}}}"on_simulation_load"in It&&(It.on_simulation_load(It.is_loaded),It._advise_events())}function r(){try{It.control_script.Fields.Item("on_start_substep").Advise(function(t,e,n){var i,o,r;try{i=t.GetValue(0),o=t.GetValue(1),r=t.GetValue(2)}catch(e){i=t.GetValue(0),o=t.GetValue(1),r=t.GetValue(2)}null===o&&(o=""),null===r&&(r=""),null===i&&(i=""),"on_start_substep"in It&&It.on_start_substep(i,o,r),It._check_alert(r)},0),It.control_script.Fields.Item("on_start_new_substep").Advise(function(t,e,n){var i,o,r;try{i=t.GetValue(0),o=t.GetValue(1),r=t.GetValue(2)}catch(e){i=t.GetValue(0),o=t.GetValue(1),r=t.GetValue(2)}null===o&&(o=""),null===r&&(r=""),null===i&&(i=""),"on_start_new_substep"in It&&It.on_start_new_substep(i,o,r),It.id_procedure=i,It.id_step=o,It.id_substep=r},0);try{It.control_script.Fields.Item("on_new_state").Advise($,0)}catch(t){It.control_script.Fields.Item("on_vcr_state").Advise(J,0)}It.control_script.Fields.Item("on_proc_fraction_changed").Advise(function(t,e,n){"on_proc_fraction_changed"in It&&It.on_proc_fraction_changed(t.Value),It.procedure_fraction=t.Value},0);try{It.control_script.Fields.Item("onSliderFraction").Advise(et,0)}catch(t){It.control_script.Fields.Item("on_proc_fraction_changed").Advise(et,0)}It.control_script.Fields.Item("on_zoom_changed").Advise(function(t,e,n){"on_zoom_changed"in It&&It.on_zoom_changed(t.Value),It.zoom_level=t.Value},0);try{It.control_script.Fields.Item("on_procedure_events").Advise(tt,0)}catch(t){It.control_script.Fields.Item("on_event_out").Advise(Q,0)}}catch(t){}}function s(t){this._last_alert!=t&&this.state==this.PLAY&&(this._last_alert=t,""!==this._last_alert&&this._last_alert.indexOf("_")>=0&&"on_alert"in this&&this.on_alert(this._last_alert))}function a(t){It=this,this.cortona.Engine.CreateVrmlFromUrl(t,o)}function c(){It=this,It.is_loaded=!1;var t=It.cortona.Engine;try{It.control_script=t.Nodes.Item("VCR_CONTROL_SCRIPT"),It.id_procedure=It.get_procedure_id(),It.id_step=It.get_step_id(),It.id_substep=It.get_substep_id(),It.is_loaded=!0}catch(e){t.RootNodes.Clear()}try{"undefined"==typeof It.ignore_viewpoint_changes&&(It.ignore_viewpoint_changes=!1),It.control_script.Fields.Item("set_ignore_viewpoints").Value=It.ignore_viewpoint_changes}catch(t){}"on_simulation_load"in It&&It.on_simulation_load(It.is_loaded),It._advise_events()}function l(){this.is_loaded=!1,this.cortona.Engine.RootNodes.Clear()}function u(){this.is_loaded&&(0!==this.control_script.Fields.Item("isFinal").Value&&this.vcr_stop(),this.vcr_play_ext())}function d(){if(this.is_loaded){if("Script"==this.control_script.TypeName&&this.control_script.Fields.Item("isFinal").Value&&0===this.control_script.Fields.Item("cmd_stack").Count)return;if(this.control_script.Fields.Item("vcr_play").Value=0,this.isMultiThreadAnimation)for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_play").Value=0}}function h(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_stop").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_stop").Value=0}function p(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_pause").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_pause").Value=0}function f(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_forward").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_forward").Value=0}function m(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_backward").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_backward").Value=0}function v(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_next").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_next").Value=0}function _(){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_previous").Value=0,this.isMultiThreadAnimation))for(var t=0;t<this.AnimationThreads.length;t++)this.AnimationThreads[t].Fields.Item("vcr_previous").Value=0}function g(t){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_goto").Value=String(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("vcr_goto").Value=String(t)}function y(t,e){if(this.is_loaded){var n=this.cortona.Engine.CreateField("MFString");n.Add(String(t)),n.Add(String(e)),this.control_script.Fields.Item("vcr_set_range").Assign(n)}}function b(t){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_set_position").Value=String(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("vcr_set_position").Value=String(t)}function w(t){if(this.is_loaded&&(this.control_script.Fields.Item("setSliderPosition").Value=Number(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("setSliderPosition").Value=Number(t)}function E(t){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_set_fraction").Value=Number(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("vcr_set_fraction").Value=Number(t)}function T(t,e){if(this.is_loaded){var n=e?"set_procedure_fraction":"vcr_set_proc_fraction";if(this.control_script.Fields.Item(n).Value=Number(t),this.isMultiThreadAnimation)for(var i=0;i<this.AnimationThreads.length;i++)this.AnimationThreads[i].Fields.Item(n).Value=Number(t)}}function I(t){if(this.is_loaded&&(this.control_script.Fields.Item("vcr_set_step_fraction").Value=Number(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("vcr_set_step_fraction").Value=Number(t)}function C(){if(this.is_loaded){var t=0;try{t=this.control_script.Fields.Item("on_substep_fraction_changed").Value}catch(t){}return t}}function S(){if(this.is_loaded){var t=0;try{t=this.control_script.Fields.Item("on_proc_fraction_changed").Value}catch(t){}return t}}function A(){if(this.is_loaded){var t=0;try{t=this.control_script.Fields.Item("on_step_fraction_changed").Value}catch(t){}return t}}function F(){var t="";if(this.is_loaded)try{t=this.control_script.Fields.Item("on_start_new_substep").GetValue(0)}catch(t){}return t}function O(){var t="";if(this.is_loaded)try{t=this.control_script.Fields.Item("on_start_new_substep").GetValue(1)}catch(t){}return t}function M(){var t="";if(this.is_loaded)try{t=this.control_script.Fields.Item("on_start_new_substep").GetValue(2)}catch(t){}return t}function x(t){if(this.is_loaded&&(this.control_script.Fields.Item("set_speed_ratio").Value=Number(t),this.isMultiThreadAnimation))for(var e=0;e<this.AnimationThreads.length;e++)this.AnimationThreads[e].Fields.Item("set_speed_ratio").Value=Number(t)}function P(t){this.is_loaded&&(this.control_script.Fields.Item("set_ignore_viewpoints").Value=t?1:0)}function V(t){if(this.is_loaded)try{return this.control_script.Fields.Item("set_mute_audio").Value=t?1:0,!0}catch(t){return!1}}function D(){return this.is_loaded?this.control_script.Fields.Item("timeCompression").Value:1}function N(){return!!this.is_loaded&&this.control_script.Fields.Item("blockViewpoints").Value}function L(t){this.is_loaded&&(this.control_script.Fields.Item("set_ui_smoothcontrol").Value=t?1:0)}function B(t){this.is_loaded&&(this.control_script.Fields.Item("set_ui_axis").Value=t?1:0)}function R(t){this.is_loaded&&(this.control_script.Fields.Item("set_ui_vcr").Value=t?1:0)}function k(t){this.is_loaded&&(this.control_script.Fields.Item("set_ui_zoom").Value=t?1:0)}function H(t){this.is_loaded&&(this.control_script.Fields.Item("set_stop_by_step").Value=1==t,this.control_script.Fields.Item("set_stop_by_substep").Value=2==t)}function j(){this.is_loaded&&(this.control_script.Fields.Item("zoom_reset").Value=0)}function Y(t){this.is_loaded&&(this.control_script.Fields.Item("zoom_set_delta").Value=Number(t))}function X(t){this.is_loaded&&(this.control_script.Fields.Item("zoom_set_level").Value=Number(t))}function z(t){this.is_loaded&&(this.control_script.Fields.Item("isEnabledSkinControl").Value=t?1:0)}function G(t){if(this.is_loaded){for(var e=this.cortona.Engine.CreateField("MFFloat"),n=0;n<t.length;n++)e.Add(Number(t[n]));this.control_script.Fields.Item("set_new_viewpoint").Assign(e)}}function U(){var t=[];if(this.is_loaded)try{for(var e=this.control_script.Fields.Item("OP").Value.Fields.Item("steps"),n=0;n<e.Count;n++)t.push(e.GetValue(n).Fields.Item("id").Value)}catch(t){}return t}function W(){var t=[];if(this.is_loaded)try{for(var e=this.control_script.Fields.Item("OP").Value.Fields.Item("steps"),n=0;n<e.Count;n++)for(var i=e.GetValue(n).Fields.Item("substeps"),o=0;o<i.Count;o++)t.push(i.GetValue(o).Fields.Item("id").Value)}catch(t){}return t}function Z(t){}function K(){return""}function q(){return[]}function $(t,e,n){var i=It.state;if(It.isMultiThreadAnimation){for(var o=0,r=0;r<It.AnimationThreads.length;r++){if("1"==It.AnimationThreads[r].Fields.Item("on_new_state").GetValue(0)){o=1;break}"2"==It.AnimationThreads[r].Fields.Item("on_new_state").GetValue(0)&&(o=2)}this.state!=o&&("on_vcr_state"in It&&It.on_vcr_state(o),It.state=o)}else"on_vcr_state"in It&&It.on_vcr_state(parseInt(t.GetValue(0))),It.state=+t.GetValue(0);"on_finish_procedure"in It&&i==It.PLAY&&It.state==It.STOP&&"0"!=t.GetValue(1)&&setTimeout(It.on_finish_procedure,0),It._check_alert(It.id_substep)}function J(t,e,n){var i=It.state;if(It.isMultiThreadAnimation){for(var o=0,r=0;r<It.AnimationThreads.length;r++){if(1==It.AnimationThreads[r].Fields.Item("on_vcr_state").Value){o=1;break}2==It.AnimationThreads[r].Fields.Item("on_vcr_state").Value&&(o=2)}this.state!=o&&("on_vcr_state"in It&&It.on_vcr_state(o),It.state=o)}else"on_vcr_state"in It&&It.on_vcr_state(t.Value),It.state=+t.Value;"on_finish_procedure"in It&&i==It.PLAY&&It.state==It.STOP&&0!==It.control_script.Fields.Item("isFinal").Value&&setTimeout(It.on_finish_procedure,0),It._check_alert(It.id_substep)}function Q(t,e,n){if("on_events_out"in It){for(var i=[],o=It.control_script.Nodes.Item("VCR_CONTROL_SCRIPT").Fields.Item("CommandsSetID").Value.Fields.Item("_"),r=0;r<o.Count;r++)i.push({id:o.GetValue(r).Fields.Item("ID").Value,title:o.GetValue(r).Fields.Item("title").Value,info:o.GetValue(r).Fields.Item("info").Value});It.on_events_out(i)}}function tt(t,e,n){if("on_events_out"in It){for(var i=[],o=0;o<t.Count;o+=3)i.push({id:t.GetValue(o),title:t.GetValue(o+1),info:t.GetValue(o+2)});It.on_events_out(i)}}function et(t,e,n){"on_seek_position_changed"in It&&It.on_seek_position_changed(t.Value)}function nt(){try{if(parseFloat(this.control_script.Fields.Item("version_num").Value)<3)return alert("WARNING:\r\n\r\nOld version simulation. Nonlinear mode not supported."),0;var t=this.cortona.Engine,e=this.control_script.Fields.Item("newproc");this.AllSubSteps=this.control_script.Fields.Item("AllSubSteps").Value.Fields.Item("children");var n=t.CreateVrmlFromString('PROTO Procedure[field SFString title "" field SFString comment "" exposedField SFString id "" exposedField MFNode steps []]{Group{children IS steps}}PROTO Step[field SFString title "" exposedField SFString id "" exposedField SFBool simulate TRUE exposedField MFNode substeps []]{Group{children IS substeps}}Procedure{steps Step{substeps[]}}');return e.Value=n.GetValue(0),this.is_nonlinear_mode=!0,1}catch(t){return 0}}function it(t,e){if(this.is_loaded){if(this.vcr_pause(),0===this._prepare_nonlinear_mode())return 0;this._clear_multithread_mode();var n=this._form_substeps_list(t,this.control_script);if(this._refresh(),n>0)return this._preset_to_position(e),1}return 0}function ot(t,e){if(this.is_loaded){if(t.length<=1)return 0===t.length?this.set_procedure([],e):this.set_procedure(t[0],e);if(this.vcr_pause(),0===this._prepare_nonlinear_mode())return 0;this.isMultiThreadAnimation=!0,this._prepare_multithread_animations(t.length);var n=0,i=!1;n=this._form_substeps_list(t[0],this.control_script),n>0&&(i=!0);for(var o=0;o<this.AnimationThreads.length;o++)n=this._form_substeps_list(t[o+1],this.AnimationThreads[o]),n>0&&(i=!0);if(i)return this._refresh(),this._corect_procedure_duration(),this._preset_to_position(e),1}return 0}function rt(){if(this.isMultiThreadAnimation){for(var t=this._get_animation_duration(this.control_script),e=0,n=0,i=[],o=null,r='PROTO Set_NULL[field SFString title "" field MFFloat Parameters [] exposedField MFFloat period [0,1,0,0,1] eventIn SFFloat time_fraction  exposedField SFInt32 objectID 0 exposedField SFInt32 attributeID 0 exposedField SFString objectName "" exposedField SFString attributeName "null" eventOut SFVec3f value_changed ]{Group{}}PROTO SubStepNULL[exposedField MFNode commands [] field SFString title "NULL" exposedField SFString id "6FEB6759-47D8-43EC-89D0-4AB3D0A1A287" exposedField SFTime duration 1]{Group{children IS commands}}SubStepNULL{commands Set_NULL{}}',s=0;s<this.AnimationThreads.length;s++)n=substeps_count=this._get_animation_duration(this.AnimationThreads[s]),i.push(n),n>e&&n>t&&(e=n);e>0?(n=e-t,o=this.cortona.Engine.CreateVrmlFromString(r),this.control_script.Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps").Add(o.GetValue(0)),o.GetValue(0).Fields.Item("duration").Value=n):e=t;for(var a=0;a<this.AnimationThreads.length;a++)e>i[a]+.01&&(n=e-i[a],o=this.cortona.Engine.CreateVrmlFromString(r),this.AnimationThreads[a].Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps").Add(o.GetValue(0)),o.GetValue(0).Fields.Item("duration").Value=n)}}function st(t){var e=t.Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps"),n=0;for(i=0;i<e.Count;i++)n+=e.GetValue(i).Fields.Item("duration").Value;return n}function at(){if(this.isMultiThreadAnimation){this.isMultiThreadAnimation=!1;for(var t=0;t<this.AnimationThreads.length;t++)this.cortona.Engine.RootNodes.Remove("animation_node_N"+t);this.AnimationThreads=[]}}function ct(t){var e,n=t-1,i=this.control_script.Proto,o=null,r=this.AnimationThreads.length,s=null;if(r<n)for(e=r;e<n;e++){o=i.CreateInstance(),this.cortona.Engine.RootNodes.Add(o),o.Name="animation_node_N"+e;try{o.Fields.Item("on_new_state").Advise($,0)}catch(t){o.Fields.Item("on_vcr_state").Advise(J,0)}this.cortona.Engine.AddRoute(this.control_script,"outPlayPause",o,"inPlayPause"),this.cortona.Engine.AddRoute(this.control_script,"onSliderMove",o,"setSliderPosition"),s=this.cortona.Engine.CreateVrmlFromString('PROTO Procedure[field SFString title "" field SFString comment "" exposedField SFString id "" exposedField MFNode steps []]{Group{children IS steps}}PROTO Step[field SFString title "" exposedField SFString id "" exposedField SFBool simulate TRUE exposedField MFNode substeps []]{Group{children IS substeps}}Procedure{steps Step{substeps[]}}'),
o("newproc").Value=s.GetValue(0),this.AnimationThreads.push(o)}if(r>n){for(e=0;e<n;e++)this.AnimationThreads.push(o);for(e=n;e<r;e++)this.cortona.Engine.RootNodes.Remove("animation_node_N"+e),this.AnimationThreads.pop()}}function lt(t,e){var n=this.cortona.Engine.CreateField("MFNode");if(t.length>0)for(var i=0,o=0;o<t.length;o++)i=this._add_animation_substep(t[o]),i>=0?n.Add(this.AllSubSteps.GetValue(i)):alert("WARNING:\r\n\r\nAnimation with ID - "+t[o]+" - not found.");return e.Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps").Assign(n),n.Count}function ut(t){for(var e=0;e<this.AllSubSteps.Count;e++)if(this.AllSubSteps.GetValue(e).Fields.Item("id").Value==t)return e;return-1}function dt(t){var e=0,n=0,i=0,o=this.cortona.Engine.CreateField("MFFloat");if(t>0&&(n=this.control_script.Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps").Count-1,i=1),this.control_script.Fields.Item("set_new_procedure").Assign(this.control_script.Fields.Item("newproc")),o.Add(e),o.Add(n),o.Add(i),this.control_script.Fields.Item("now_step_substep_fraction").Assign(o),this.isMultiThreadAnimation)for(var r=0;r<this.AnimationThreads.length;r++)t>0&&o.SetValue(1,this.AnimationThreads[r].Fields.Item("newproc").Value.Fields.Item("steps").GetValue(0).Fields.Item("substeps").Count-1),this.AnimationThreads[r].Fields.Item("set_new_procedure").Assign(this.AnimationThreads[r].Fields.Item("newproc")),this.AnimationThreads[r].Fields.Item("now_step_substep_fraction").Assign(o);this._refresh()}function ht(){}function pt(t,e,n){var i=this.cortona.Engine,o=i.CreatePosition(i.CreateNodeFromString("Transform{translation "+t+" "+e+" "+n+"}"));return o.Translation}function ft(t){var e=[];switch(t.Type){case 210:e=[t.X,t.Y,t.Z,t.Angle];break;case 213:e=[t.X,t.Y,t.Z];break;case 212:e=[t.X,t.Y]}return e}function mt(t){var e=t.BBoxCenter,n=t.BBoxSize;if(0===n.X&&0===n.Y&&0===n.Z)return[];var i=this.cortona.Engine,o=this._create_vector(e.X,e.Y,e.Z),r=this._create_vector(e.X+n.X,e.Y+n.Y,e.Z+n.Z),s=this._create_vector(e.X-n.X,e.Y+n.Y,e.Z+n.Z),a=this._create_vector(e.X+n.X,e.Y-n.Y,e.Z+n.Z),c=this._create_vector(e.X-n.X,e.Y-n.Y,e.Z+n.Z),l=this._create_vector(e.X+n.X,e.Y+n.Y,e.Z-n.Z),u=this._create_vector(e.X-n.X,e.Y+n.Y,e.Z-n.Z),d=this._create_vector(e.X+n.X,e.Y-n.Y,e.Z-n.Z),h=this._create_vector(e.X-n.X,e.Y-n.Y,e.Z-n.Z),p=i.CreatePosition(null);try{for(;null!==t.Fields.Item("parent").Value;){if(t.Fields.Item("whichChoice")&&t.Fields.Item("whichChoice").Value<0)return[];t=t.Fields.Item("parent").Value,p.SetTransform(t),o=p.MultVecMatrix(o),r=p.MultVecMatrix(r),s=p.MultVecMatrix(s),a=p.MultVecMatrix(a),c=p.MultVecMatrix(c),l=p.MultVecMatrix(l),u=p.MultVecMatrix(u),d=p.MultVecMatrix(d),h=p.MultVecMatrix(h)}}catch(t){}return[o,r,s,a,c,l,u,d,h]}function vt(t){this.fit_to_objects([t])}function _t(t){for(var e=[],n=this.cortona.Engine,i=0;i<t.length;i++)try{e.push(this._get_node_boundbox(n.Nodes.Item(t[i])))}catch(t){}var o=[],r=[],s=[];for(i=0;i<e.length;i++)for(var a=e[i],c=1;c<a.length;c++)o.length>0?(o[0]=Math.min(o[0],a[c].X),o[1]=Math.max(o[1],a[c].X),r[0]=Math.min(r[0],a[c].Y),r[1]=Math.max(r[1],a[c].Y),s[0]=Math.min(s[0],a[c].Z),s[1]=Math.max(s[1],a[c].Z)):(o=[a[c].X,a[c].X],r=[a[c].Y,a[c].Y],s=[a[c].Z,a[c].Z]);if(0!==o.length){var l=this._create_vector((o[0]+o[1])/2,(r[0]+r[1])/2,(s[0]+s[1])/2),u=0;u=Math.max(Math.abs(o[0]-o[1]),Math.max(Math.abs(r[0]-r[1]),Math.abs(s[0]-s[1])));var d=n.BBoxSize,h=Math.sqrt(d.X*d.X+d.Y*d.Y+d.Z*d.Z);.45*h<u&&(u=.45*h);var p=2,f=.828427,m=u*p/f,v=n.CreatePosition(null);v.Rotation=n.CameraPosition.Rotation;var _=n.CreatePosition(null);_.Translation=this._create_vector(l.X,l.Y,l.Z);var g=_.MultVecMatrix(v.Inverse().MultMatrixVec(this._create_vector(0,0,m))),y=this._createArrayFromField(g),b=this._createArrayFromField(n.CameraPosition.Rotation),w=.2*u/f,E=h/f,T=new Array(l.X,l.Y,l.Z,y[0],y[1],y[2],b[0],b[1],b[2],b[3],w,E,0);It.set_new_viewpoint(T)}}function gt(t){this.flash_nodes([t])}function yt(t){var e=It.cortona.Engine,n=null;try{n=e.Nodes.Item("VCR__PROTO__FLASHER")}catch(t){}null===n&&(n=e.CreateVrmlFromString('PROTO flasher[eventIn MFNode node]{DEF TS TimeSensor {loop TRUE enabled FALSE}DEF SC Script{eventIn\tSFTime inT eventIn MFNode inN IS node field SFNode tmr USE TS field MFNode ns []field MFNode ons []field SFTime st -1 field SFTime itv 1 field SFInt32 times 2 field SFBool actv FALSE field MFColor cs [] field MFColor ocs [] field SFTime tic -1 url "javascript: function getNs(val){ns.length=0;var t=0;var chs = [];for(var i=0; i<val.length; i++){chs.push(val[i]);}for(var i=0; i<chs.length; i++){if(chs[i] && chs[i].children){var ch = chs[i].children;for(var j=0; j<ch.length; j++){chs.push(ch[j]);}}if(chs[i] && chs[i].appearance && chs[i].appearance.material){ns[t]=chs[i];t++;}}}function inN(value){if(actv){stp(false);}getNs(value);var old = false;for(var i=0; i<ns.length; i++){for(var j=0; j<ons.length; j++){if(ons[j]==ns[i]){old = true;cs[i] = ocs[j];break;}}if(!old)cs[i] = ns[i].appearance.material.emissiveColor;}tmr.enabled = true;actv = true;st = -1;tic=-1;}function inT(v){tic=v;}function stp(stt){if(stt){tmr.enabled = false;actv = false;ons.length = 0;ocs.length = 0;}else{ons = ns;ocs = cs;}for(var i=0; i<ns.length; i++){ns[i].appearance.material.emissiveColor=cs[i];}ns.length = 0;cs.length = 0;}function eventsProcessed(){if(tic>0){if(st<0){st = tic;}var fr = (tic - st)/itv;if(fr>1){stp(true);}else{var c = Math.sin(times*Math.PI*fr);c = c * c;var clr = new SFColor(c, c, c);for(var i=0; i<ns.length; i++){ns[i].appearance.material.emissiveColor=clr;}}}}"}ROUTE TS.time TO SC.inT}DEF VCR__PROTO__FLASHER flasher{}').GetValue(0),e.RootNodes.Add(n));for(var i=e.CreateField("MFNode"),o=0;o<t.length;o++)try{i.Add(e.Nodes.Item(t[o]))}catch(t){}n.Fields.Item("node").Assign(i)}function bt(t,e,n,i){if(t.length>0){var o,r=this.cortona.Engine;if(0===this.ATP){var s=[];for(o=0;o<t.length;o++)try{var a=r.Nodes.Item(t[o]);a&&s.push(a)}catch(t){}if(s.length>0){for(o=0;o<s.length;o++)s=s.concat(It._getAllChildren(s[o]));var c,l=r.CreateField("SFColor");try{l.Red=e,l.Green=n,l.Blue=i}catch(t){}for(r.AutoRefresh=0,o=0;o<s.length;o++)try{c=s[o].Fields.Item("appearance"),c.Value&&(c=c.Value.Fields.Item("material"),c.Value&&c.Value.Fields.Item("emissiveColor").Assign(l))}catch(t){}r.AutoRefresh=1}}else{var u=null;try{u=r.Nodes.Item("VCR__NODE__HLIGHTER")}catch(t){}null===u&&(u=r.CreateNodeFromString('DEF VCR__NODE__HLIGHTER Script{eventIn MFNode hlNodes url "javascript: function hlNodes(value){var hcolor=value[0].emissiveColor;var nodes=[];for(var i=1;i<value.length;i++){nodes.push(value[i]);}for(var i=0;i<nodes.length;i++){var n=nodes[i];if(n){if(n.appearance && n.appearance.material)n.appearance.material.emissiveColor=hcolor;if(n.children){var ch = n.children;for(var j=0;j<ch.length;j++){nodes.push(ch[j]);}}}}}"}'),r.RootNodes.Add(u));var d=r.CreateNodeFromString("Material{emissiveColor "+e+" "+n+" "+i+"}"),h=r.CreateField("MFNode");for(h.Add(d),o=0;o<t.length;o++)try{h.Add(r.Nodes.Item(t[o]))}catch(t){}u.Fields.Item("hlNodes").Assign(h)}}}function wt(t){var e=It.cortona.Engine,n=e.Nodes.Item(t),i=!1;if(n){var o=n.BboxSize;if(i=o.X>0||o.Y>0||o.Z>0)for(var r=n.Fields.Item("parent");r&&r.Value;){if(n=r.Value,n.Fields.Item("whichChoice").Value<0){i=!1;break}r=n.Fields.Item("parent")}}return i}function Et(t){var e=[];try{for(var n=t.Fields.Item("children"),i=0;i<n.Count;i++){var o=n.GetValue(i);e.push(o),e=e.concat(It._getAllChildren(o))}}catch(t){}return e}function Tt(){if(this.is_loaded){var t,e,n=this.cortona.Engine,i=n.CameraPosition,o=n.NavigationInfo.Fields.Item("avatarSize"),r=this._createArrayFromField(i.Translation),s=this._createArrayFromField(i.Rotation);try{t=this.control_script.Fields.Item("minZoom").Value,e=this.control_script.Fields.Item("maxZoom").Value}catch(n){t=this.control_script.Nodes.Item("VCR_CONTROL_SCRIPT").Fields.Item("minZoom").Value,e=this.control_script.Nodes.Item("VCR_CONTROL_SCRIPT").Fields.Item("maxZoom").Value}var a=new Array(o.GetValue(3),o.GetValue(4),o.GetValue(5),r[0],r[1],r[2],s[0],s[1],s[2],s[3],t,e,0);return a}}n.prototype.load=a,n.prototype.unload=l,n.prototype.scene_loaded_on_start=c,n.prototype.vcr_play=u,n.prototype.vcr_play_ext=d,n.prototype.vcr_stop=h,n.prototype.vcr_pause=p,n.prototype.vcr_next_substep=v,n.prototype.vcr_previous_substep=_,n.prototype.vcr_next_step=f,n.prototype.vcr_previous_step=m,n.prototype.vcr_goto=g,n.prototype.vcr_set_range=y,n.prototype.vcr_set_position=b,n.prototype.vcr_set_seek_position=w,n.prototype.vcr_set_fraction=E,n.prototype.vcr_set_proc_fraction=T,n.prototype.vcr_set_step_fraction=I,n.prototype.vcr_get_fraction=C,n.prototype.vcr_get_proc_fraction=S,n.prototype.vcr_get_step_fraction=A,n.prototype.get_procedure_id=F,n.prototype.get_step_id=O,n.prototype.get_substep_id=M,n.prototype.set_speed_ratio=x,n.prototype.set_freeze_viewpoint=P,n.prototype.set_mute_audio=V,n.prototype.get_speed_ratio=D,n.prototype.get_freeze_viewpoint=N,n.prototype.set_ui_smoothcontrol=L,n.prototype.set_ui_axis=B,n.prototype.set_ui_vcr=R,n.prototype.set_ui_zoom=k,n.prototype.set_autostop_mode=H,n.prototype.zoom_reset=j,n.prototype.zoom_set_delta=Y,n.prototype.zoom_set_level=X,n.prototype.set_guided_zoom=z,n.prototype.set_new_viewpoint=G,n.prototype.get_viewpoint_data=Tt,n.prototype.fit_to_object=vt,n.prototype.fit_to_objects=_t,n.prototype._get_node_boundbox=mt,n.prototype.flash_node=gt,n.prototype.flash_nodes=yt,n.prototype.set_emissiveColor=bt,n.prototype._getAllChildren=Et,n.prototype.checkVisibility=wt,n.prototype.get_steps_array=U,n.prototype.get_substeps_array=W,n.prototype.interactivity_xml_load=Z,n.prototype.interactivity_xml_get_task=K,n.prototype.interactivity_xml_get_subtasks=q,n.prototype.set_procedure=it,n.prototype.set_multithread_procedure=ot,n.prototype._prepare_nonlinear_mode=nt,n.prototype._preset_to_position=dt,n.prototype._form_substeps_list=lt,n.prototype._add_animation_substep=ut,n.prototype._clear_multithread_mode=at,n.prototype._prepare_multithread_animations=ct,n.prototype._corect_procedure_duration=rt,n.prototype._get_animation_duration=st,n.prototype._refresh=ht,n.prototype._check_alert=s,n.prototype._create_vector=pt,n.prototype._createArrayFromField=ft,n.prototype._advise_events=r;var It=null;n.prototype.attach=function(){if(!this.defaultHandler){var t=this;this.defaultHandler=function(e){var n=e.detail.raw[0];n&&t.scene_loaded_on_start()},this.cortona.addEventListener("OnSceneLoaded",this.defaultHandler,!1),console.log("SimulationAPI attached")}},n.prototype.detach=function(){this.defaultHandler&&(this.cortona.removeEventListener("OnSceneLoaded",this.defaultHandler,!1),delete this.defaultHandler,console.log("SimulationAPI detached"))},t.exports={SimulationAPI:n}},function(t,e,n){var i=n(8).defineClass,o=n(13),r=n(12);t.exports=new(i(o,function(){this.constructor.superClass.call(this,"fps",["OnFrameRateMeasured"])},{create:function(t){return new(i(r,function(t,e){this.constructor.superClass.call(this,t);var n=document.createElement("div");n.setAttribute("id",t.getNextId()),n.style.position="absolute",n.style.bottom=0,n.style.right=0,n.style.fontSize="4em",n.style.fontWeight="bold",n.style.width="4em",n.style.height="2em",n.style.zIndex="100",this.instance=n,this.hide(),e.appendChild(n),this.fps=0;this.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.ieRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),this.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.ieCancelAnimationFrame||window.clearTimeout}(),this.now=function(){return Date.now()/1e3}},{attach:function(t){var e=this;this.then=this.now(),this.fpsAcc=0,this.fpsCount=0,this.fpsTime=this.then;var n=function(){var t=e.now(),i=t-e.then;e.then=t,0!==i&&(e.fpsAcc+=1/i,e.fpsCount++,t-e.fpsTime>.5&&(e.fps=(e.fpsAcc/e.fpsCount).toFixed(2),e.instance.innerHTML=e.fps,e.trigger("OnFrameRateMeasured",{raw:[e.fps],src:e}),e.fpsTime=t,e.fpsCount=0,e.fpsAcc=0)),e.requestAnimFrame.call(window,n)};return this.requestId=this.requestAnimFrame.call(window,n),this},detach:function(){return this.requestId&&(this.cancelAnimFrame.call(window,this.requestId),delete this.requestId),this},show:function(){return this.instance.style.display="block",this},hide:function(){return this.instance.style.display="none",this}}))(this,t.container).attach()}}))},function(t,e,n){var i=n(8).defineClass,o=n(8).expand,r=n(13),s=n(19);t.exports=new(i(r,function(){this.constructor.superClass.call(this,"popupmenu",[]),this.menuTemplate={items:[]}},{setMenuTemplate:function(t){return this.menuTemplate={items:t||[]},this},create:function(t){return new(i(s,function(t,e){var i=n(20)(t.menuTemplate),r=n(23);this.menuTemplate=o({},t.menuTemplate),this.constructor.superClass.call(this,t,e,i,r)},{attach:function(){var t=this;return this.instance.contentWindow.onfocus=function(){clearTimeout(t.deferredHiding)},this.menuTemplate.items.forEach(function(e,n){e&&"function"==typeof e.action&&(t.content.firstChild.children[n].onclick=function(){t.hide(),e.action.call(this)})}),this},detach:function(){return clearTimeout(this.deferredHiding),this},close:function(){clearTimeout(this.deferredHiding);var t=this;this.deferredHiding=setTimeout(function(){t.hide()},0)}}))(this,t.container)}}))},function(t,e,n){var i=n(8).defineClass,o=n(12),r=i(o,function(t,e,n,i){r.superClass.call(this,t);var o=e.appendChild(document.createElement("iframe"));o.setAttribute("frameSpacing",0),o.setAttribute("frameBorder",0),o.setAttribute("scrolling","no"),o.setAttribute("id",t.getNextId()),o.style.position="absolute",o.style.visibility="hidden",o.style.left="-10000px",o.style.top="-10000px",o.style.zIndex=1e3;var s=this;o.onload=function(){if(!s.content){var t=o.contentDocument.head,e=o.contentDocument.body;if(e.style.padding=0,e.style.margin=0,e.style.overflow="hidden",i){var r=t.appendChild(o.contentDocument.createElement("style"));r.innerHTML=i}n&&(e.innerHTML=n),e.onselectstart=function(){return!1},e.oncontextmenu=function(){return!1},s.head=t,s.body=e,s.content=e.firstChild,s.attach()}},this.instance=o,this.hide()},{isLoaded:function(){return!!this.content},attach:function(){return this},detach:function(){return this},show:function(){return this.onresize(),this.instance.style.visibility="visible",this},hide:function(){return this.instance.style.visibility="hidden",this.instance.style.left="-10000px",this.instance.style.top="-10000px",this},onresize:function(t,e){return this.isLoaded()||this.instance.onload(),this.instance.style.height=e||"100%",this.instance.style.width=t||"100%",this.content&&this.content.offsetHeight&&this.content.offsetWidth&&(this.instance.style.height=this.content.offsetHeight+"px",this.instance.style.width=this.content.offsetWidth+"px"),this},setPosition:function(t,e){return this.instance.style.left=t+"px",this.instance.style.top=e+"px",this}});t.exports=r},function(t,e,n){function i(t){var e,n="",i=t||{};return function(t){n+='<div class="menu-popup"><ul>',function(){var i=t;if("number"==typeof i.length)for(var r=0,s=i.length;r<s;r++){var a=i[r];a?n=n+"<li"+o.attr("class",o.classes([{disabled:!a.action}],[!0]),!1,!0)+">"+o.escape(null==(e=a.description)?"":e)+"</li>":n+="<hr>"}else{var s=0;for(var r in i){s++;var a=i[r];a?n=n+"<li"+o.attr("class",o.classes([{disabled:!a.action}],[!0]),!1,!0)+">"+o.escape(null==(e=a.description)?"":e)+"</li>":n+="<hr>"}}}.call(this),n+="</ul></div>"}.call(this,"items"in i?i.items:"undefined"!=typeof items?items:void 0),n}var o=n(21);t.exports=i},function(t,e,n){"use strict";function i(t,e){if(1===arguments.length){for(var n=t[0],o=1;o<t.length;o++)n=i(n,t[o]);return n}for(var r in e)if("class"===r){var s=t[r]||[];t[r]=(Array.isArray(s)?s:[s]).concat(e[r]||[])}else if("style"===r){var s=a(t[r]),c=a(e[r]);t[r]=s+c}else t[r]=e[r];return t}function o(t,e){for(var n,i="",o="",r=Array.isArray(e),a=0;a<t.length;a++)n=s(t[a]),n&&(r&&e[a]&&(n=u(n)),i=i+o+n,o=" ");return i}function r(t){var e="",n="";for(var i in t)i&&t[i]&&h.call(t,i)&&(e=e+n+i,n=" ");return e}function s(t,e){return Array.isArray(t)?o(t,e):t&&"object"==typeof t?r(t):t||""}function a(t){if(!t)return"";if("object"==typeof t){var e="";for(var n in t)h.call(t,n)&&(e=e+n+":"+t[n]+";");return e}return t+="",";"!==t[t.length-1]?t+";":t}function c(t,e,n,i){return e!==!1&&null!=e&&(e||"class"!==t&&"style"!==t)?e===!0?" "+(i?t:t+'="'+t+'"'):("function"==typeof e.toJSON&&(e=e.toJSON()),"string"==typeof e||(e=JSON.stringify(e),n||e.indexOf('"')===-1)?(n&&(e=u(e))," "+t+'="'+e+'"'):" "+t+"='"+e.replace(/'/g,"&#39;")+"'"):""}function l(t,e){var n="";for(var i in t)if(h.call(t,i)){var o=t[i];if("class"===i){o=s(o),n=c(i,o,!1,e)+n;continue}"style"===i&&(o=a(o)),n+=c(i,o,!1,e)}return n}function u(t){var e=""+t,n=p.exec(e);if(!n)return t;var i,o,r,s="";for(i=n.index,o=0;i<e.length;i++){switch(e.charCodeAt(i)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}o!==i&&(s+=e.substring(o,i)),o=i+1,s+=r}return o!==i?s+e.substring(o,i):s}function d(t,e,i,o){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&e||o))throw t.message+=" on line "+i,t;try{o=o||n(22).readFileSync(e,"utf8")}catch(e){d(t,null,i)}var r=3,s=o.split("\n"),a=Math.max(i-r,0),c=Math.min(s.length,i+r),r=s.slice(a,c).map(function(t,e){var n=e+a+1;return(n==i?"  > ":"    ")+n+"| "+t}).join("\n");throw t.path=e,t.message=(e||"Pug")+":"+i+"\n"+r+"\n\n"+t.message,t}var h=Object.prototype.hasOwnProperty;e.merge=i,e.classes=s,e.style=a,e.attr=c,e.attrs=l;var p=/["&<>]/;e.escape=u,e.rethrow=d},function(t,e){},function(t,e,n){e=t.exports=n(4)(),e.push([t.id,".menu-popup{position:absolute;border:.25mm solid #a7a7a7;background-color:#f2f2f2;display:inline-block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.menu-popup ul{display:block;margin:.7mm;padding:0}.menu-popup ul li{display:block;text-indent:5mm;padding:.7mm;padding-right:3mm;margin:0;font-family:Verdana,sans-serif;font-size:2.82mm;white-space:nowrap}.menu-popup ul li:hover{background-color:#91c9f7;cursor:pointer}.menu-popup ul li.disabled{color:gray}.menu-popup ul hr{margin:.7mm;border:none;color:#e2e2e2;background-color:#e2e2e2;height:.25mm}",""])},function(t,e,n){var i=n(8).defineClass,o=n(13),r=n(19);t.exports=new(i(o,function(){this.constructor.superClass.call(this,"alert",["OnAlertActivated","OnAlertDismiss","OnAlertClosed"]),this.alertType={ALERT:0,WARNING:1,CAUTION:2,NOTE:3}},{create:function(t){return new(i(r,function(t,e){var i=n(25)(),o=n(26);this.constructor.superClass.call(this,t,e,i,o)},{attach:function(){var t=this.instance,e=this.head;Array.prototype.slice.call(document.getElementsByTagName("style")).forEach(function(n){e.appendChild(t.contentDocument.createElement("style")).innerHTML=n.innerHTML}),Array.prototype.slice.call(document.getElementsByTagName("link")).forEach(function(t){"stylesheet"==t.rel&&e.appendChild(t.cloneNode(!0))}),this.frameType=this.content.firstChild,this.frame=this.frameType.firstChild,this.alertCaption=this.frame.firstChild,this.alertBody=this.alertCaption.nextSibling,this.alertFooter=this.alertBody.nextSibling,this.activated=!1;var n=this;return this.alertFooter.getElementsByTagName("button")[0].onclick=function(){n.trigger("OnAlertClosed"),n.hide()},this},show:function(){return this.activated=!0,this.constructor.superClass.prototype.show.call(this),this.trigger("OnAlertActivated"),this},hide:function(){return this.instance.classList.remove("activated"),this.constructor.superClass.prototype.hide.call(this),this.activated&&this.trigger("OnAlertDismiss"),this.activated=!1,this},message:function(t,e,n){return this.isLoaded()||this.instance.onload(),this.frameType.className="alert-message-type-"+t,this.alertBody.innerHTML="","string"==typeof n?this.alertBody.appendChild(document.createTextNode(n)):"object"==typeof n&&n&&n.innerHTML&&(this.alertBody.innerHTML="",this.alertBody.appendChild(n.cloneNode(!0))),"string"==typeof e&&(this.alertCaption.innerHTML="",this.alertCaption.appendChild(document.createTextNode(e)),this.alertCaption.style.display=e?"":"none"),this.onresize(),this},onresize:function(){this.constructor.superClass.prototype.onresize.call(this,"80%");var t=this.instance.parentNode.offsetHeight,e=this.instance.parentNode.offsetWidth,n=this.instance.offsetHeight,i=this.instance.offsetWidth;return this.setPosition((e-i)/2,(t-n)/2),this}}))(this,t.container)}}))},function(t,e,n){function i(t){var e="";return e+='<div class="alert-message"><div><div class="alert-message-frame"><div class="alert-message-caption"></div><div class="alert-message-body"></div><div class="alert-message-footer"><button>Close</button></div></div></div></div>'}n(21);t.exports=i},function(t,e,n){e=t.exports=n(4)(),e.push([t.id,".alert-message>div{padding:5mm}.alert-message .alert-message-frame{border:.7mm solid #000;background-color:#fff}.alert-message .alert-message-frame .alert-message-caption{text-align:center;padding:5mm 2.5mm 2.5mm;font-weight:700}.alert-message .alert-message-frame .alert-message-body{text-align:center;padding:5mm 2.5mm 2.5mm}.alert-message .alert-message-frame .alert-message-body .p{text-align:center}.alert-message .alert-message-frame .alert-message-footer{text-align:center;padding:5mm 2.5mm}.alert-message .alert-message-frame .alert-message-footer button{width:20mm;height:7mm;font-size:4mm}.alert-message-type-0{background-color:#6495ed}.alert-message-type-1{background-color:red}.alert-message-type-2{background-color:#ff8c00}.alert-message-type-3{background-color:#b0c4de}",""])},function(t,e,n){var i=n(8).defineClass,o=n(13),r=n(12);t.exports=new(i(o,function(){this.constructor.superClass.call(this,"error",[])},{create:function(t){return new(i(r,function(t,e){this.constructor.superClass.call(this,t);var n=document.createElement("div");n.setAttribute("id",t.getNextId()),n.className="error-message",n.appendChild(document.createElement("div")).className="error-message-body",e.appendChild(n),this.instance=n,this.body=this.instance.firstChild,this.container=e},{attach:function(){return this.container.classList.add("error"),this},detach:function(){return this.container.classList.remove("error"),this},message:function(t){this.body.innerHTML="";for(var e=0;e<arguments.length;e++){var n=arguments[e].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\[([^\[\]]*)]/g,function(t,e){var n=e.split("|");return'<a href="'+(n.length>1?n[1]:n[0])+'">'+n[0]+"</a>"});this.body.appendChild(document.createElement("div")).innerHTML=n}return this}}))(this,t.container).attach()}}))},function(t,e,n){var i=n(8).defineClass,o=n(13),r=n(12);t.exports=new(i(o,function(){this.constructor.superClass.call(this,"loading",[])},{create:function(t){return new(i(r,function(t,e){this.constructor.superClass.call(this,t),n(29);var i=document.createElement("div");i.innerHTML=n(31)();var o=i.firstChild;o.setAttribute("id",t.getNextId()),o.classList.add("loading-indicator"),e.appendChild(o),this.instance=o,this.container=e},{attach:function(){return this.container.classList.add("wait"),this},detach:function(){return this.container.classList.remove("wait"),this},show:function(){return this.container.classList.add("wait"),this},hide:function(){return this.container.classList.remove("wait"),this}}))(this,t.container).attach()}}))},function(t,e,n){var i=n(30);"string"==typeof i&&(i=[[t.id,i,""]]);n(5)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(4)(),e.push([t.id,".loading-indicator{position:relative;width:40mm;height:40mm;text-align:center}.loading-indicator div{width:40mm;height:40mm;margin:0 auto;border:2mm solid #ebebeb;border-radius:50%;border-left-color:transparent;border-right-color:transparent;animation:cssload-spin .7s infinite linear;-o-animation:cssload-spin .7s infinite linear;-ms-animation:cssload-spin .7s infinite linear;-webkit-animation:cssload-spin .7s infinite linear;-moz-animation:cssload-spin .7s infinite linear}@keyframes cssload-spin{to{transform:rotate(1turn)}}@-webkit-keyframes cssload-spin{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""])},function(t,e,n){function i(t){var e="";return e+='<div class="loading-indicator"><div></div></div>'}n(21);t.exports=i},function(t,e,n){var i=n(8).defineClass,o=n(13),r=n(12),s="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xlink",c="1.2";t.exports=new(i(o,function(){this.constructor.superClass.call(this,"svg",["HotspotHit","HotspotEnter","HotspotLeave","DocumentComplete","DocumentLoadingError","ContextMenu"])},{create:function(t){return new(i(r,function(t,e){function i(t){for(var e=t;e&&"a"!=e.nodeName.toLowerCase();)e=e.parentNode;return e}function o(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function r(t){var e="touch"===t.pointerType;if(f.length<2&&(u.setOriginBy(t.screenX-d,t.screenY-h),d=t.screenX,h=t.screenY,u.applyTransform()),e){for(var n=-1,i=0;i<f.length;i++)if(f[i].id===t.pointerId){n=i;break}if(n>=0&&(f[n].x=t.screenX,f[n].y=t.screenY,f[n].clientX=t.clientX,f[n].clientY=t.clientY),2===f.length){var r=u.view.clientWidth,s=u.view.clientHeight,a=u.getViewBoxDimensions(),c=a.w,l=a.h,m=p-o(f[0],f[1]);p=o(f[0],f[1]);var v=Math.max(u.minScale,Math.min(u.maxScale,(1-m/100)*u.zoom))/u.zoom,_=u.view.getBoundingClientRect(),g=(f[1].clientX-f[0].clientX)/2+f[0].clientX,y=(f[1].clientY-f[0].clientY)/2+f[0].clientY,b=g-_.left,w=y-_.top,E=(b-(r-c)/2-u.originX/a.scale)/u.zoom*a.scale,T=(w-(s-l)/2-u.originY/a.scale)/u.zoom*a.scale,I=u.originX+E*(1-v)*u.zoom,C=u.originY+T*(1-v)*u.zoom;v>1?u.setTransform(I,C,u.zoom*v):(u.zoom*=v,u.setOrigin(I,C),u.applyTransform())}}t.preventDefault()}function c(t){var e="touch"===t.pointerType;e&&(f=f.filter(function(e){return e.id!==t.pointerId}),p=2===f.length?o(f[0],f[1]):0,1===f.length&&(d=f[0].x,h=f[0].y)),0===t.button&&0===f.length&&(document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",c),u.view.style.cursor="default")}this.constructor.superClass.call(this,t),n(33);var l=document.createElementNS(s,"svg");l.setAttribute("id",t.getNextId()),this.instance=l,this.view=e,e.setAttribute("touch-action","none"),this.zoom=1,this.originX=0,this.originY=0,this.maxScale=10,this.minScale=1,this.isHidden=!0,this.image=new Image;var u=this;this.image.onload=function(t){t=t||window.event;var e=u.image,n=u.instance.ownerDocument.createElementNS(s,"image");n.setAttribute("image-rendering","optimizeQuality"),n.setAttribute("width",e.width),n.setAttribute("height",e.height),u.instance.setAttribute("viewBox","0 0 "+e.width+" "+e.height),n.setAttributeNS(a,"href",e.src),u.viewBox={x:0,y:0,width:e.width,height:e.height},u.viewport=document.createElementNS(s,"g");var i=u.viewport.transform.baseVal;i.initialize(u.instance.createSVGTransform()),i.appendItem(u.instance.createSVGTransform()),u.viewport.appendChild(n),u.instance.appendChild(u.viewport),u.trigger("DocumentComplete",{raw:[e.src],src:t}),u.isHidden||u.attach()},this.eventHandlersA={click:function(t){t=t||window.event;var e=+(t.shiftKey&&1)|+(t.ctrlKey&&2)|+(t.altKey&&4),n=i(t.target||t.srcElement),o=n?n.getAttribute("name"):"";u.trigger("HotspotHit",{raw:[o,e],src:t}),t.preventDefault()},pointerover:function(t){t=t||window.event;var e=i(t.target||t.srcElement),n=e?e.getAttribute("name"):"";u.trigger("HotspotEnter",{raw:[n],src:t}),t.preventDefault()},pointerout:function(t){t=t||window.event;var e=i(t.target||t.srcElement),n=e?e.getAttribute("name"):"";u.trigger("HotspotLeave",{raw:[n],src:t}),t.preventDefault()},contextmenu:function(t){t=t||window.event;var e=t.target||t.srcElement,n=i(e),o=n?n.getAttribute("name"):"",r=u.view.getBoundingClientRect(),s=t.clientX-r.left,a=t.clientY-r.top;return u.trigger("ContextMenu",{raw:[o,s,a],src:t}),t.preventDefault(),t.stopPropagation(),!1}};var d,h,p,f=[];this.eventHandlers={contextmenu:this.eventHandlersA.contextmenu,wheel:function(t){t=t||window.event;var e=t.deltaY<0?-10:10,n=u.view.clientWidth,i=u.view.clientHeight,o=u.getViewBoxDimensions(),r=o.w,s=o.h,a=Math.max(u.minScale,Math.min(u.maxScale,(1-e/100)*u.zoom))/u.zoom,c=u.view.getBoundingClientRect(),l=t.clientX-c.left,d=t.clientY-c.top,h=(l-(n-r)/2-u.originX/o.scale)/u.zoom*o.scale,p=(d-(i-s)/2-u.originY/o.scale)/u.zoom*o.scale,f=u.originX+h*(1-a)*u.zoom,m=u.originY+p*(1-a)*u.zoom;return a>1?u.setTransform(f,m,u.zoom*a):(u.zoom*=a,u.setOrigin(f,m),u.applyTransform()),t.preventDefault(),!1},dblclick:function(t){return f=[],u.reset(),t.preventDefault(),!1},pointerdown:function(t){t=t||window.event;var e="touch"===t.pointerType;e&&(f.push({id:t.pointerId,x:t.screenX,y:t.screenY,clientX:t.clientX,clientY:t.clientY}),p=2===f.length?o(f[0],f[1]):0),0===t.button&&f.length<2&&(d=t.screenX,h=t.screenY,document.addEventListener("pointermove",r),document.addEventListener("pointerup",c),u.view.style.cursor="move")}},this.hide(),e.appendChild(l)},{getViewBoxDimensions:function(){var t=this.view.clientWidth,e=this.view.clientHeight,n=this.viewBox.width,i=this.viewBox.height,o=t/e,r=n/i;return o>r?(i=e,n=i*r):o<r?(n=t,i=n/r):(i=e,n=t),{h:i,w:n,scale:this.viewBox.width/n}},setOriginBy:function(t,e){var n=this.getViewBoxDimensions();this.setOrigin(this.originX+t*n.scale,this.originY+e*n.scale)},setOrigin:function(t,e){var n=this.view.clientWidth,i=this.view.clientHeight,o=this.getViewBoxDimensions(),r=o.w,s=o.h,a=o.scale,c=r*this.zoom,l=s*this.zoom,u=-Math.abs(n-r)/2,d=-Math.abs(i-s)/2;c<=n?this.originX=Math.max(Math.min(t,(u+n-c)*a),u*a):this.originX=Math.max(Math.min(t,u*a),(u+n-c)*a),l<=i?this.originY=Math.max(Math.min(e,(d+i-l)*a),d*a):this.originY=Math.max(Math.min(e,d*a),(d+i-l)*a)},setTransform:function(t,e,n){this.originX=t,this.originY=e,this.zoom=n,this.applyTransform()},applyTransform:function(){var t=this.viewport.transform.baseVal;t.getItem(0).setTranslate(this.originX,this.originY),t.getItem(1).setScale(this.zoom,this.zoom)},getSVGSource:function(){var t=document.createElement("div");return t.appendChild(this.instance.cloneNode(!0)),t.firstChild.removeAttribute("id"),t.firstChild.removeAttribute("style"),t.innerHTML},version:function(){if(this.isValid())return"HTML5 SVG Component ver. "+c},attach:function(){for(var t=this,e=this.instance,n=e.getElementsByTagName("a"),i=0;i<n.length;i++)!function(e){var n=e.getAttribute("name");n||(console.log('WARNING: Element "'+e.tagName+'" has no "name" attribute. It uses text content instead'),n=e.textContent.trim(),e.setAttribute("name",n));for(var i in t.eventHandlersA)e.addEventListener(i,t.eventHandlersA[i],!1)}(n[i]);for(var o in t.eventHandlers)t.view.addEventListener(o,t.eventHandlers[o],!1);return this},detach:function(){for(var t=this,e=this.instance,n=e.getElementsByTagName("a"),i=0;i<n.length;i++){var o=n[i];for(var r in t.eventHandlers)o.removeEventListener(r,t.eventHandlers[r],!1)}for(var r in t.eventHandlers)t.view.removeEventListener(r,t.eventHandlers[r],!1);return this.zoom=1,this.originX=0,this.originY=0,this},load:function(t,e){if(e||/\.(png|jpe?g|jpe|gif)$/i.test(t)){this.detach();for(var n=this.instance;n.firstChild;)n.removeChild(n.firstChild);this.image.src=t}else{var i=new window.XMLHttpRequest;i.overrideMimeType&&i.overrideMimeType("image/svg+xml");try{var o=this;i.open("GET",t,!0),i.onerror=function(e){o.trigger("DocumentLoadingError",{raw:[t,i.status],src:e||window.event})},i.onload=function(e){if(e=e||window.event,i.responseXML){var n=document.createElement("div");n.innerHTML=i.response;var r=n.querySelector("svg");if(r){o.detach();var a=o.instance.style.cssText,c=o.instance.getAttribute("class");o.view.replaceChild(r,o.instance),o.instance=r;var l=r.getElementsByTagName("title")[0];l&&r.removeChild(l);var u=Array.prototype.slice.call(r.childNodes||r.children).filter(function(t){var e=t.nodeName;return"#text"!==e&&"title"!==e&&"defs"!==e&&"desc"!=e});o.viewport=document.createElementNS(s,"g");
var d=o.viewport.transform.baseVal;d.initialize(r.createSVGTransform()),d.appendItem(r.createSVGTransform()),u.forEach(function(t){o.viewport.appendChild(t)}),r.appendChild(o.viewport),r.getAttribute("viewBox")||r.setAttribute("viewBox","0 0 "+r.getAttribute("width")+" "+r.getAttribute("height")),o.viewBox=r.getBBox(),r.style.cssText=a,r.setAttribute("class",c),o.trigger("DocumentComplete",{raw:[t],src:e}),o.isHidden||o.attach()}}},i.send(null)}catch(e){this.trigger("DocumentLoadingError",{raw:[t],src:e})}}return this},unload:function(){var t=this.instance;for(this.detach();t.firstChild;)t.removeChild(t.firstChild);return this},highlight:function(t,e){var n=this.instance;Array.prototype.slice.call(n.getElementsByTagName("a")).forEach(function(n){n.getAttribute("name")===t&&Array.prototype.slice.call(n.getElementsByTagName("path")).forEach(function(t){t.style.stroke=e})})},unhighlight:function(t,e){var n=this.instance;Array.prototype.slice.call(n.getElementsByTagName("a")).forEach(function(e){e.getAttribute("name")===t&&Array.prototype.slice.call(e.getElementsByTagName("path")).forEach(function(t){t.style.stroke=""})})},select:function(t,e){var n=this.instance;Array.prototype.slice.call(n.getElementsByTagName("a")).forEach(function(n){n.getAttribute("name")===t&&Array.prototype.slice.call(n.getElementsByTagName("path")).forEach(function(t){t.style.fill=e,t.style.fillOpacity=1})})},unselect:function(t,e){var n=this.instance;Array.prototype.slice.call(n.getElementsByTagName("a")).forEach(function(e){e.getAttribute("name")===t&&Array.prototype.slice.call(e.getElementsByTagName("path")).forEach(function(t){t.style.fill="",t.style.fillOpacity=0})})},reset:function(){var t=1;return this.setTransform(0,0,t),this},scaleBy:function(t){var e=this.view.clientWidth,n=this.view.clientHeight,i=this.viewBox.width,o=this.viewBox.height,r=e/n,s=i/o;r>s?(o=n*this.zoom,i=o*s):r<s?(i=e*this.zoom,o=i/s):(o=n*this.zoom,i=e*this.zoom);var a=Math.max(this.minScale,Math.min(this.maxScale,this.zoom+t)),c=(this.zoom-a)/2;return this.zoom=a,this.setOriginBy(i*c,o*c),this.applyTransform(),this},hide:function(){return this.constructor.superClass.prototype.hide.call(this),this.detach(),this.isHidden=!0,this},show:function(){return this.constructor.superClass.prototype.show.call(this),this.attach(),this.isHidden=!1,this}}))(this,t.container).attach()}}))},function(t,e,n){/*!
	 * PEP v0.4.3-pre | https://github.com/jquery/PEP
	 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
	 */
!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t,e){e=e||Object.create(null);var n=document.createEvent("Event");n.initEvent(t,e.bubbles||!1,e.cancelable||!1);for(var i,o=2;o<h.length;o++)i=h[o],n[i]=e[i]||p[o];n.buttons=e.buttons||0;var r=0;return r=e.pressure&&n.buttons?e.pressure:n.buttons?.5:0,n.x=n.clientX,n.y=n.clientY,n.pointerId=e.pointerId||0,n.width=e.width||0,n.height=e.height||0,n.pressure=r,n.tiltX=e.tiltX||0,n.tiltY=e.tiltY||0,n.pointerType=e.pointerType||"",n.hwTimestamp=e.hwTimestamp||0,n.isPrimary=e.isPrimary||!1,n}function e(){this.array=[],this.size=0}function n(t,e,n,i){this.addCallback=t.bind(i),this.removeCallback=e.bind(i),this.changedCallback=n.bind(i),S&&(this.observer=new S(this.mutationWatcher.bind(this)))}function i(t){return"body /shadow-deep/ "+o(t)}function o(t){return'[touch-action="'+t+'"]'}function r(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}function s(){if(x){O.forEach(function(t){String(t)===t?(M+=o(t)+r(t)+"\n",P&&(M+=i(t)+r(t)+"\n")):(M+=t.selectors.map(o)+r(t.rule)+"\n",P&&(M+=t.selectors.map(i)+r(t.rule)+"\n"))});var t=document.createElement("style");t.textContent=M,document.head.appendChild(t)}}function a(){if(!window.PointerEvent){if(window.PointerEvent=t,window.navigator.msPointerEnabled){var e=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:e,enumerable:!0}),b.registerSource("ms",$)}else b.registerSource("mouse",R),void 0!==window.ontouchstart&&b.registerSource("touch",U);b.register(document)}}function c(t){if(!b.pointermap.has(t)){var e=new Error("InvalidPointerId");throw e.name="InvalidPointerId",e}}function l(t){if(!t.ownerDocument.contains(t)){var e=new Error("InvalidStateError");throw e.name="InvalidStateError",e}}function u(t){var e=b.pointermap.get(t);return 0!==e.buttons}function d(){window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:W},releasePointerCapture:{value:Z}})}var h=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],p=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],f=window.Map&&window.Map.prototype.forEach,m=f?Map:e;e.prototype={set:function(t,e){return void 0===e?this.delete(t):(this.has(t)||this.size++,void(this.array[t]=e))},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(n,i){t.call(e,n,i,this)},this)}};var v=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],_=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],g={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},y="undefined"!=typeof SVGElementInstance,b={pointermap:new m,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e,i=n.events;i&&(i.forEach(function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))},this),this.eventSources[t]=n,this.eventSourceList.push(n))},register:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(t){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0}},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(e,n){this.captureInfo[n.pointerId]&&(n.relatedTarget=null);var i=new t(e,n);return n.preventDefault&&(i.preventDefault=n.preventDefault),i._target=i._target||n.target,i},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),i=0;i<v.length;i++)e=v[i],n[e]=t[e]||_[i],!y||"target"!==e&&"relatedTarget"!==e||n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in g?void 0:e:t._target},propagate:function(t,e,n){for(var i=t.target,o=[];!i.contains(t.relatedTarget)&&i!==document;)o.push(i),i=i.parentNode;n&&o.reverse(),o.forEach(function(n){t.target=n,e.call(this,t)},this)},setCapture:function(e,n){this.captureInfo[e]&&this.releaseCapture(e),this.captureInfo[e]=n;var i=new t("gotpointercapture");i.pointerId=e,this.implicitRelease=this.releaseCapture.bind(this,e),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease),i._target=n,this.asyncDispatchEvent(i)},releaseCapture:function(e){var n=this.captureInfo[e];if(n){var i=new t("lostpointercapture");i.pointerId=e,this.captureInfo[e]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease),i._target=n,this.asyncDispatchEvent(i)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};b.boundHandler=b.eventHandler.bind(b);var w={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var i,o,r=t.elementFromPoint(e,n);for(o=this.targetingShadow(r);o;){if(i=o.elementFromPoint(e,n)){var s=this.targetingShadow(i);return this.searchRoot(s,e,n)||i}o=this.olderShadow(o)}return r}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,i=this.owner(t.target);return i.elementFromPoint(e,n)||(i=document),this.searchRoot(i,e,n)}},E=Array.prototype.forEach.call.bind(Array.prototype.forEach),T=Array.prototype.map.call.bind(Array.prototype.map),I=Array.prototype.slice.call.bind(Array.prototype.slice),C=Array.prototype.filter.call.bind(Array.prototype.filter),S=window.MutationObserver||window.WebKitMutationObserver,A="[touch-action]",F={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};n.prototype={watchSubtree:function(t){this.observer&&w.canTarget(t)&&this.observer.observe(t,F)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){E(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll(A):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(I(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=T(t,this.findElements,this);return e.push(C(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){if("childList"===t.type){var e=this.flattenMutationTree(t.addedNodes);e.forEach(this.addElement,this);var n=this.flattenMutationTree(t.removedNodes);n.forEach(this.removeElement,this)}else"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var O=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],M="",x=window.PointerEvent||window.MSPointerEvent,P=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,V=b.pointermap,D=25,N=[1,4,2,8,16],L=!1;try{L=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var B,R={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){b.listen(t,this.events)},unregister:function(t){b.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,i=t.clientX,o=t.clientY,r=0,s=n.length;r<s&&(e=n[r]);r++){var a=Math.abs(i-e.x),c=Math.abs(o-e.y);if(a<=D&&c<=D)return!0}},prepareEvent:function(t){var e=b.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,e},prepareButtonsForMove:function(t,e){var n=V.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=V.get(this.POINTER_ID),n=this.prepareEvent(t);L||(n.buttons=N[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),V.set(this.POINTER_ID,t),e&&0!==e.buttons?b.move(n):b.down(n)}},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);L||this.prepareButtonsForMove(e,t),e.button=-1,V.set(this.POINTER_ID,t),b.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=V.get(this.POINTER_ID),n=this.prepareEvent(t);if(!L){var i=N[n.button];n.buttons=e?e.buttons&~i:0,t.buttons=n.buttons}V.set(this.POINTER_ID,t),n.buttons&=~N[n.button],0===n.buttons?b.up(n):b.move(n)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);L||this.prepareButtonsForMove(e,t),e.button=-1,V.set(this.POINTER_ID,t),b.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);L||this.prepareButtonsForMove(e,t),e.button=-1,b.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);b.cancel(e),this.deactivateMouse()},deactivateMouse:function(){V.delete(this.POINTER_ID)}},k=b.captureInfo,H=w.findTarget.bind(w),j=w.allShadows.bind(w),Y=b.pointermap,X=2500,z=200,G="touch-action",U={events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){B.enableOnSubtree(t)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute(G),n=this.touchActionToScrollType(e);n&&(t._scrollType=n,b.listen(t,this.events),j(t).forEach(function(t){t._scrollType=n,b.listen(t,this.events)},this))},elementRemoved:function(t){t._scrollType=void 0,b.unlisten(t,this.events),j(t).forEach(function(t){t._scrollType=void 0,b.unlisten(t,this.events)},this)},elementChanged:function(t,e){var n=t.getAttribute(G),i=this.touchActionToScrollType(n),o=this.touchActionToScrollType(e);i&&o?(t._scrollType=i,j(t).forEach(function(t){t._scrollType=i},this)):o?this.elementRemoved(t):i&&this.elementAdded(t)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e=t,n=this.scrollTypes;return"none"===e?"none":e===n.XSCROLLER?"X":e===n.YSCROLLER?"Y":n.SCROLLER.exec(e)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===Y.size||1===Y.size&&Y.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,z)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){var e=0;return"touchstart"!==t&&"touchmove"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=b.cloneEvent(t),i=n.pointerId=t.identifier+2;n.target=k[i]||H(n),n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=t.radiusX||t.webkitRadiusX||0,n.height=t.radiusY||t.webkitRadiusY||0,n.pressure=t.force||t.webkitForce||.5,n.isPrimary=this.isPrimaryTouch(t),n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var o=this;return n.preventDefault=function(){o.scrolling=!1,o.firstXY=null,e.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var i,o=0;o<n.length;o++)i=n[o],e.call(this,this.touchToPointer(i))},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if("none"===n)e=!1;else if("XY"===n)e=!0;else{var i=t.changedTouches[0],o=n,r="Y"===n?"X":"Y",s=Math.abs(i["client"+o]-this.firstXY[o]),a=Math.abs(i["client"+r]-this.firstXY[r]);e=s>=a}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,i=0,o=t.length;i<o&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(Y.size>=e.length){var n=[];Y.forEach(function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var o=t.out;n.push(o)}},this),n.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){Y.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),b.enterOver(t),b.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,n=Y.get(e.pointerId);if(n){var i=n.out,o=n.outTarget;b.move(e),i&&o!==e.target&&(i.relatedTarget=e.target,e.relatedTarget=o,i.target=o,e.target?(b.leaveOut(i),b.enterOver(e)):(e.target=o,e.relatedTarget=null,this.cancelOut(e))),n.out=e,n.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(b.up(t),b.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){b.cancel(t),b.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){Y.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=R.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var i={x:n.clientX,y:n.clientY};e.push(i);var o=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,i);setTimeout(o,X)}}};B=new n(U.elementAdded,U.elementRemoved,U.elementChanged,U);var W,Z,K=b.pointermap,q=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,$={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){b.listen(t,this.events)},unregister:function(t){b.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return q&&(e=b.cloneEvent(t),e.pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){K.delete(t)},MSPointerDown:function(t){K.set(t.pointerId,t);var e=this.prepareEvent(t);b.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);b.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);b.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);b.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);b.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);b.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=b.makeEvent("lostpointercapture",t);b.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=b.makeEvent("gotpointercapture",t);b.dispatchEvent(e)}},J=window.navigator;J.msPointerEnabled?(W=function(t){c(t),l(this),u(t)&&this.msSetPointerCapture(t)},Z=function(t){c(t),this.msReleasePointerCapture(t)}):(W=function(t){c(t),l(this),u(t)&&b.setCapture(t,this)},Z=function(t){c(t),b.releaseCapture(t,this)}),s(),a(),d();var Q={dispatcher:b,Installer:n,PointerEvent:t,PointerMap:m,targetFinding:w};return Q})},function(t,e,n){var i=n(8).defineClass,o=n(13),r=n(12);n(35),n(36),n(37);var s="1.2";t.exports=new(i(o,function(){this.constructor.superClass.call(this,"solo",["OnReady","OnSoloLoadComplete","OnObjectVMEnter","OnObjectVMOut","OnObjectVMMove","OnObjectVMHit","Click","DblClick","MouseDown","MouseMove","OnMouseEnter","MouseUp","OnMouseOut","OnSceneLoaded","OnSceneUnloaded","OnAnchor","OnSeekChanged"])},{create:function(t){var e=this;return t[this.type]=new(i(r,function(i,o){this.constructor.superClass.call(this,i),n(33);var r=document.createElement("div"),s="";s+='<div style="height: 100%;">',s+='<canvas oncontextmenu="event.preventDefault()" touch-action="none"></canvas>',s+='<input type="range" min="0" max="100" value="0" step="0.1" style="width:99%; margin:0 1mm; height:7mm; padding:0; position: absolute; bottom: 0;">',s+="</div>",r.innerHTML=s;var a=r.firstChild,c=a.firstChild;a.setAttribute("id",i.getNextId()),this.instance=a,this.canvas=c,this.range=c.nextSibling,this.range.style.display="none",this.canvas.style.display="none",this.hide(),o.appendChild(a);var l=[0,1,4,2],u=[1,4,2,8,16],d=function(t,e){var n,i=+(t.shiftKey&&1)|+(t.ctrlKey&&2)|+(t.altKey&&4);n=e&&void 0!==t.buttons?t.buttons:void 0!==t.which?l[t.which]:u[t.button];var o=t.target||t.srcElement,r=o.getBoundingClientRect(),s=t.clientX-r.left,a=t.clientY-r.top,c=[n,i,s,a];return c},h=function(n,i,o,r){t[e.type].trigger(n,{raw:o||[],src:i},r)},p=function(t,e){var n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)},f=3,m=function(t,e){return!(!t||!e)&&p(t.slice(2),e.slice(2))>f},v=this,_=a.clientWidth,g=a.clientHeight;c.height=g,c.width=_,this.overObject=null;var y=null,b=navigator.userAgent.lastIndexOf("Firefox")>0,w=function(){b&&(y=document.createElement("div"),y.style.position="absolute",y.style.top="0",y.style.bottom="0",y.style.left="0",y.style.right="0",y.style.zIndex=1e4,y.onmousemove=function(t){return t=t||window.event,document.body.removeChild(t.target),y=null,t.preventDefault(),t.stopPropagation(),!1},setTimeout(function(){y&&(document.body.removeChild(y),y=null)},100),document.body.appendChild(y))};if(this.eventHandlers={webglcontextlost:function(t){alert("WebGL context lost. You will need to reload the page."),t.preventDefault()},pointermove:function(t){var e=t.target||t.srcElement,n=e.getBoundingClientRect(),i=t.clientX-n.left,o=t.clientY-n.top,r=d(t,!0),s=v.overObject?v.overObject.handle:null;if(0===r[0]){var a=v.solo.app.pickObject(i,o,v.FEATURE_PICK_TOPMOST);a&&h("OnObjectVMMove",t,[a.handle,a.name],t.target);var c=a?a.handle:null;s!==c&&(v.overObject&&(w(),h("OnObjectVMOut",t,[s,v.overObject.name],t.target)),a&&h("OnObjectVMEnter",t,[c,a.name],t.target)),v.overObject=a}else v.overObject&&(w(),h("OnObjectVMOut",t,[s,v.overObject.name],t.target),v.overObject=null);h("MouseMove",t,r)},pointerenter:function(t){y||h("OnMouseEnter",t)},pointerout:function(t){y||(v.overObject&&(h("OnObjectVMOut",t,[v.overObject.handle,v.overObject.name],t.target),v.overObject=null,w()),h("OnMouseOut",t))},pointerdown:function(t){this.lastMouseArguments=d(t),h("MouseDown",t,this.lastMouseArguments)},pointerup:function(t){var e=t.target||t.srcElement,n=e.getBoundingClientRect(),i=t.clientX-n.left,o=t.clientY-n.top,r=d(t),s=v.solo.app.pickObject(i,o,v.FEATURE_PICK_TOPMOST);m(this.lastMouseArguments,r)||s&&h("OnObjectVMHit",t,[s.handle,s.name].concat(r),t.target);var a=v.overObject?v.overObject.handle:null,c=s?s.handle:null;a!==c&&(v.overObject&&(w(),h("OnObjectVMOut",t,[a,v.overObject.name],t.target)),s&&h("OnObjectVMEnter",t,[c,s.name],t.target)),v.overObject=s,h("MouseUp",t,r),delete this.lastMouseArguments},click:function(t){h("Click",t)},dblclick:function(t){h("DblClick",t)}},navigator.pointerEnabled===!1)for(var E in this.eventHandlers)0===E.indexOf("pointer")&&(this.eventHandlers[E.replace(/^pointer/,"mouse")]=this.eventHandlers[E],delete this.eventHandlers[E]);this.attach()},{version:function(){if(this.isValid()&&this.solo)return"Cortona3D Solo ver. "+this.solo.app.version()+",  Component ver. "+s},attach:function(){var t,e=this.canvas;if(e)for(t in this.eventHandlers)e.addEventListener(t,this.eventHandlers[t],!1);return this},detach:function(){var t,e=this.canvas;if(e)for(t in this.eventHandlers)e.removeEventListener(t,this.eventHandlers[t],!1);this.didChangeLayout&&window.removeEventListener("resize",this.didChangeLayout,!1);try{this.solo.core.abort()}catch(t){}return this},load:function(t){var e=this,i=n(38);return i.path(n.p),i("Cortona3DSolo.js",function(){function i(t){this.name="LoadingError",this.message=t||""}var o=e.solo=window.Cortona3DSolo;if(!o||!o.app)throw i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,new i("Unable to load "+(n.p?n.p:".")+"Cortona3DSolo.js");e.trigger("OnSoloLoadComplete");var r=0;"object"==typeof window.chrome&&"win"===window.navigator.platform.substr(0,3).toLowerCase()&&(r|=o.app.DISABLE_VERTEX_ARRAY_OBJECT_OES),o.app.initialize(e.canvas,t),o.app.onReady=function(){o.app.configureInstance(r),e.trigger("OnReady")};var s;o.app.firstFrameDidArrive=function(){return s?(o.app.ui.showPanels(!0),e.defaultBackgroundColors&&o.app.setDefaultBackgroundColors(e.defaultBackgroundColors),void e.trigger("OnSceneLoaded",{raw:[!0],src:s})):void(s=null)},o.app.didFinishLoadDocument=function(t){function n(t){var n=this.value/100;e.trigger("OnSeekChanged",{raw:[n,"change"==t.type],src:t})}e.attach();var i=null===s;s=t,i&&o.app.firstFrameDidArrive.call(o.app),o.core.canvas.style.display="block",o.app.ui.showPanels(!1),e.didChangeLayout=function(){if(o.core.isRuntimeReady()){var t=e.instance,n=t.clientWidth,i=Math.max(0,t.clientHeight-e.range.offsetHeight);o.app.resize(n,i)}},window.addEventListener("resize",e.didChangeLayout,!1),e.range.value=0,e.range.addEventListener("input",n,!1),e.range.addEventListener("change",n,!1),e.didChangeLayout()},o.app.didFailLoadDocument=function(t){o.core.printErr(t),e.reason=t,e.trigger("OnSceneLoaded",{raw:[!1],src:t})}}),this},unload:function(){return this},hide:function(){this.instance&&(this.instance.style.display="none"),this.solo&&this.solo.app.ui.showPanels(!1)},show:function(){this.instance&&(this.instance.style.display="block"),this.solo&&this.solo.app.ui.showPanels(!0);var t=this.instance,e=this.canvas;return e.height=t.clientHeight,e.width=t.clientWidth,this.didChangeLayout&&this.didChangeLayout(),this},toggleRangeControl:function(t){"undefined"==typeof t&&(t="none"==this.range.style.display),this.range.style.display=t?"block":"none",this.didChangeLayout&&this.didChangeLayout()}}))(this,t.container),t[this.type]}}))},function(t,e,n){t.exports=n.p+"../solo/Cortona3DSolo.js"},function(t,e,n){t.exports=n.p+"../solo/Cortona3DSoloCore.js"},function(t,e,n){t.exports=n.p+"../solo/Cortona3DSolo.js.mem"},function(t,e,n){var i,o;!function(r,s){"undefined"!=typeof t&&t.exports?t.exports=s():(i=s,o="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==o&&(t.exports=o)))}("$script",function(){function t(t,e){for(var n=0,i=t.length;n<i;++n)if(!e(t[n]))return c;return 1}function e(e,n){t(e,function(t){return!n(t)})}function n(r,s,a){function c(t){return t.call?t():h[t]}function u(){if(!--g){h[_]=1,v&&v();for(var n in f)t(n.split("|"),c)&&!e(f[n],c)&&(f[n]=[])}}r=r[l]?r:[r];var d=s&&s.call,v=d?s:a,_=d?r.join(""):s,g=r.length;return setTimeout(function(){e(r,function t(e,n){return null===e?u():(n||/^https?:\/\//.test(e)||!o||(e=e.indexOf(".js")===-1?o+e+".js":o+e),m[e]?(_&&(p[_]=1),2==m[e]?u():setTimeout(function(){t(e,!0)},0)):(m[e]=1,_&&(p[_]=1),void i(e,u)))})},0),n}function i(t,e){var n,i=s.createElement("script");i.onload=i.onerror=i[d]=function(){i[u]&&!/^c|loade/.test(i[u])||n||(i.onload=i[d]=null,n=1,m[t]=2,e())},i.async=1,i.src=r?t+(t.indexOf("?")===-1?"?":"&")+r:t,a.insertBefore(i,a.lastChild)}var o,r,s=document,a=s.getElementsByTagName("head")[0],c=!1,l="push",u="readyState",d="onreadystatechange",h={},p={},f={},m={};return n.get=i,n.order=function(t,e,i){!function o(r){r=t.shift(),t.length?n(r,o):n(r,e,i)}()},n.path=function(t){o=t},n.urlArgs=function(t){r=t},n.ready=function(i,o,r){i=i[l]?i:[i];var s=[];return!e(i,function(t){h[t]||s[l](t)})&&t(i,function(t){return h[t]})?o():!function(t){f[t]=f[t]||[],f[t][l](o),r&&r(s)}(i.join("|")),n},n.done=function(t){n([null],t)},n})},function(t,e,n){var i=n(8).defineClass,o=n(8).fromHTMLColor,r=n(13),s=n(40);t.exports=new(i(r,function(){this.constructor.superClass.call(this,"isoview",["HotspotHit","HotspotEnter","HotspotLeave","HotspotMenu","HotspotMenuSelect","DocumentComplete"])},{create:function(t){return new(i(s,function(t,e){this.constructor.superClass.call(this,t,e,"CLSID:865B2280-2B71-11D1-BC01-006097AC382A","application/x-isoview","isoview",["ObjectHit","ContextMenuItemHit","FileChanged"]),this._lastHotspot=""},{version:function(){if(this.isValid())return"IsoView "+this.instance.GetVersion()},getSVGSource:function(){return""},trigger:function(t,e,n){var i=t;switch(t){case"ObjectHit":0===e[0]?void 0!==e[1]?(i="HotspotEnter",e=[e[1]],this._lastHotspot=e[1]):(i="HotspotLeave",e=[this._lastHotspot],this._lastHotspot=""):(i="HotspotHit",e=[e[1],e[0]],this._lastHotspot=e[1]);break;case"ContextMenuItemHit":i="HotspotMenuSelect";break;case"FileChanged":i="DocumentComplete"}return s.prototype.trigger.call(this,i,e,n)},load:function(t){return this.isValid()&&this.instance.Iso3OpenFile(t),this},unload:function(){return this.isValid()&&this.instance.CloseFile(),this},highlight:function(t,e){return this.instance.Iso3HighlightObject("name("+t+")",4,o(e)),this},unhighlight:function(t,e){return this.instance.Iso3HighlightObject("name("+t+")",0,o(e)),this},select:function(t,e){return this.highlight(t,e),this},unselect:function(t,e){return this.unhighlight(t,e),this},reset:function(){return this.instance.GoHome(),this},scaleBy:function(t){return this}}))(this,t.container).attach()}}))},function(t,e,n){var i=n(8).defineClass,o=n(12),r=i(o,function(t,e,n,i,o){r.superClass.call(this,t);var s=!1,a=document.createElement("div");a.innerHTML='<object type="application/x-oleobject" classid="'+n+'"><embed type="'+i+'"></object><div class="cortona3d-plugin-disabled">Plugin "'+i+'" not installed or disabled</div>',a.style.position="absolute",a.style.width=a.style.height="1px",a.style.marginLeft="-10000px",e.appendChild(a);var c=a.firstChild;void 0===c.BackColor&&(c=c.firstChild),void 0===c.BackColor&&(c=a.lastChild,s=!0),e.removeChild(a),c.id=t.getNextId(),c.style.position="absolute",this.invalid=s,this.instance=c,this.events=s?[]:o,this.hide(),e.appendChild(c)},{attach:function(){var t=this.instance,e=this,n=t.getAttribute("id");return this.events.forEach(function(i){var o=n+"_"+i;if("function"!=typeof window[o]&&(window[o]=function(){return e.trigger(i,{raw:Array.prototype.slice.call(arguments),src:window.event})}),"OBJECT"===t.tagName&&!document.getElementById(o)){var r=document.createElement("script");r.htmlFor=t.getAttribute("id"),r.event=i+"()",r.id=o,r.text="return "+o+".apply(this, arguments)";var s=document.getElementsByTagName("head")[0];s.appendChild(r)}}),this},detach:function(){var t=this.instance,e=t.getAttribute("id");return this.events.forEach(function(n){var i=e+"_"+n;if("function"==typeof window[i]&&delete window[i],"OBJECT"===t.tagName){var o=document.getElementById(i);o&&o.parentNode.removeChild(o)}}),this},load:function(t){return this.isValid()&&(this.instance.src=t),this},unload:function(){return this.isValid()&&(this.instance.src="",this.trigger("OnSceneUnloaded")),this}});t.exports=r},function(t,e,n){var i=n(8).defineClass,o=n(8).fromHTMLColor,r=n(13),s=n(40);t.exports=new(i(r,function(){this.constructor.superClass.call(this,"viewer2d",["HotspotHit","HotspotEnter","HotspotLeave","HotspotMenu","HotspotMenuSelect","DocumentComplete"])},{create:function(t){return new(i(s,function(t,e){this.constructor.superClass.call(this,t,e,"CLSID:1D4A81CB-25A3-4EB7-A75E-4F8A5386D8F8","application/x-rapidview",t.events)},{getSVGSource:function(){var t="";return this.isValid()&&(t=this.instance.getSVGSource()),t},version:function(){if(this.isValid())return"Cortona2D Viewer "+this.instance.GetVersion()},highlight:function(t,e){var n=[],i=this.instance;try{n=i.GetHotspotIDs(t).toArray()}catch(t){}return n.forEach(function(t){i.HighlightHotspot(t,!0,o(e))}),this},unhighlight:function(t,e){var n=[],i=this.instance;try{n=i.GetHotspotIDs(t).toArray()}catch(t){}return n.forEach(function(t){i.HighlightHotspot(t,!1,o(e))}),this},select:function(t,e){return this.highlight(t,e),this},unselect:function(t,e){return this.unhighlight(t,e),this},reset:function(){return this.instance.ResetView(),this},scaleBy:function(t){return this}}))(this,t.container).attach()}}))},function(t,e,n){var i=n(8).defineClass,o=(n(8).fromHTMLColor,n(13)),r=n(40);t.exports=new(i(o,function(){this.constructor.superClass.call(this,"viewer3d",["Click","DblClick","MouseDown","MouseMove","OnMouseEnter","MouseUp","OnMouseOut","OnDrag","OnDrop","OnKeyDown","OnKeyUp","OnSceneLoaded","OnSceneUnloaded","OnAnchor","OnCameraMove","OnFrameRateMeasured"]),this.skins={default:"{1706B265-E103-4332-9871-7FEE6C37C699}","default-5.1":"{04B2095C-3E09-4519-B5D4-838BDC622661}","default-orange":"{0009E838-FFDF-4f38-94DB-A2449FB3FB3C}","default-gray":"{0413045F-CE7E-4cc6-9D30-94DF4BF8AA9A}",cad:"{46BB95BF-8EB4-481a-A1EF-50D43FC32B9D}","examine-tilt":"{75B359F4-C1D2-4E21-BC36-F699BD1792BA}","examine-nontilt":"{0650E9E3-1999-45C1-A24F-50BBE472326B}",review:"{7F82003E-34AE-4F5A-9470-4891DC8FDFCB}"}},{create:function(t){return new(i(r,function(t,e){this.constructor.superClass.call(this,t,e,"CLSID:86A88967-7A20-11D2-8EDA-00600818EDB1","application/x-cortona",t.events)},{version:function(){if(this.isValid())return"Cortona3D Viewer "+(this.instance.Version||6)},unload:function(){this.isValid()&&(this.instance.Engine.RootNodes.Clear(),this.trigger("OnSceneUnloaded",[]))}}))(this,t.container).attach()}}))},function(t,e,n){function o(){cortona3d.loadSpecIDCSS(resFolder+""+specID.toLowerCase(),r)}function r(){function t(){Nt.scene&&Nt.scene.popupmenu&&Nt.scene.popupmenu.close(),Dt.scene&&Dt.scene.popupmenu&&Dt.scene.popupmenu.close()}var e=navigator.appName.toLowerCase();if(ut="microsoft internet explorer"==e,!ut&&(dt="opera"==e,!dt)){var i=navigator.userAgent.toLowerCase();ht=i.lastIndexOf("firefox/")>0,ht||(pt=i.lastIndexOf("chrome/")>0||i.lastIndexOf("safari/")>0,ut=!pt)}ut&&"undefined"!=typeof At&&(St=At);var o=cortona3d.defineClass(null,function(t){
this.prefix=t,this.scene=Bt.viewFigure.getScene(t)},{eventsHandler:function(){return!1},setup:function(t){for(this.scene.add(cortona3d.factory.loading);t.length>0&&(this.scene.add(cortona3d.factory[t[0]]),!this.scene[t[0]].isValid());t.shift())this.scene.remove(cortona3d.factory[t[0]]);if(t.length>0){this.control=this.scene[t[0]];var e=this.scene.container,n=this.eventsHandler;cortona3d.factory[t[0]].events.forEach(function(t){e.addEventListener(t,n,!1)})}},show:function(){Bt.showFigure(this.prefix),this.control.show()},hide:function(){this.control.hide()},loaded:!1,load:function(t){var e="error"==this.control.factory.type,n=this.url!==t;!e&&n?(this.scene.loading.show(),this.url=t,this.loaded=!1,this.control.hide(),this.control.load(t)):(this.control.show(),this.scene.loading.hide()),Bt.showFigure(this.prefix)}});Dt=new(cortona3d.defineClass(o,function(){this.constructor.superClass.call(this,"2d")},{hide:function(){this.scene.popupmenu&&this.scene.popupmenu.hide(),this.constructor.superClass.prototype.hide.call(this)},setup:function(t){if(this.constructor.superClass.prototype.setup.call(this,t),!this.control){var e=this.prefix.toUpperCase()+" "+Lt.TXT_VIEWER_UNAVAILABLE;cortona3d.app.error(e,"","","",new(cortona3d.defineClass(Error,function(t,e){this.name="FigureInitializingError",this.message=t||"",this.figure=e},{}))(e,this))}this.contextMenuTemplate=[{description:Lt.TXT_CMENU_VIEWER2D_ZOOMIN||"Zoom In",action:function(){Dt.control.scaleBy(.1)}},{description:Lt.TXT_CMENU_VIEWER2D_ZOOMOUT||"Zoom Out",action:function(){Dt.control.scaleBy(-.1)}},null,{description:Lt.TXT_CMENU_VIEWER2D_BESTFIT||"Best Fit",action:function(){Dt.control.reset()}},null,{description:Lt.TXT_CMENU_ABOUT||"About",action:x}],this.scene.add(cortona3d.factory.popupmenu.setMenuTemplate(this.contextMenuTemplate))},load:function(t){switch(this.control.factory.type){case"isoview":this.control.instance.ConfigEvents(32);try{parseInt(this.control.instance.GetVersion().substr(0,1),10)>=6&&this.control.instance.ConfigTools2(1,39,1,!1,!1),this.control.instance.Iso4SetPreference("use_default_printer",0)}catch(t){}this.control.instance.AcceptDroppedFiles=!1,this.control.instance.Iso3SetObjectTipStyle("Arial",8,0,1,1,1e3),this.control.instance.ResizeToFit=!0;break;case"viewer2d":"undefined"!=typeof Lt.langID&&(this.control.instance.LangID=Lt.langID);break;case"svg":t=t.replace(/\.(cgm|tif{1,2})$/i,".svg")}this.constructor.superClass.prototype.load.call(this,t)},eventsHandler:function(t){var e=!0;switch(t.type){case"ContextMenu":var n=t.detail.raw[1],i=t.detail.raw[2];Dt.scene.popupmenu.setPosition(n,i).show();break;case"DocumentComplete":Dt.scene.loading.hide(),Dt.control.show(),Dt.loaded=!0,Bt.viewDocument.link2dNode&&Bt.viewDocument.handlers.link2d.call(Bt.viewDocument.link2dNode);break;case"DocumentLoadingError":var o="Failed to loading image "+t.detail.raw[0]+".";"undefined"!=typeof t.detail.raw[1]?o+=" XHR Status: "+t.detail.raw[1]:t.detail.src instanceof Error&&(o+=" Reason: "+t.detail.src.message),Dt.scene.loading.hide(),cortona3d.app.error(o,"","","",new(cortona3d.defineClass(Error,function(t,e){this.name="FigureLoadingError",this.message=t||"",this.figure=e},{}))(o,Dt));break;case"HotspotEnter":Dt.control.highlight(t.detail.raw[0],Lt.options.SelectedFrameColor);break;case"HotspotLeave":Dt.control.unhighlight(t.detail.raw[0]);break;case"HotspotHit":Dt.clearSelection()}t.type+"("+(t.target.id||t.target.localName)+"): "+t.detail.raw.map(function(t){if(t&&void 0!==t.toString)return t.toString();switch(typeof t){case"string":case"number":case"boolean":return t;default:return typeof t}});return e},selectHotspot:function(t){this.activeHotspot&&Dt.control.unselect(this.activeHotspot),t!=this.activeHotspot?(this.activeHotspot=t,Dt.control.select(t,Lt.options.SelectedHotspotColor)):delete this.activeHotspot},clearSelection:function(){this.activeHotspot&&(Dt.control.unselect(this.activeHotspot),delete this.activeHotspot)}})),Nt=new(cortona3d.defineClass(o,function(){this.constructor.superClass.call(this,"3d")},{hide:function(){this.api&&this.api.vcr_pause(),Bt.viewDocument.unhighlight(),this.scene.alert&&this.scene.alert.hide(),this.scene.popupmenu&&this.scene.popupmenu.hide(),this.constructor.superClass.prototype.hide.call(this)},load:function(t){".wrl"!=t&&("solo"==this.control.factory.type&&(t=Lt.propInteractivityName),this.constructor.superClass.prototype.load.call(this,t))},setup:function(t){if(this.constructor.superClass.prototype.setup.call(this,t),!this.control){var e=this.prefix.toUpperCase()+" "+Lt.TXT_VIEWER_UNAVAILABLE;return void cortona3d.app.error(e,"","","",new(cortona3d.defineClass(Error,function(t,e){this.name="FigureInitializingError",this.message=t||"",this.figure=e},{}))(e,this))}var i=this.eventsHandler,o=this.scene.container;n(44),this.scene.add(cortona3d.factory.alert),this.scene.alert.factory.events.forEach(function(t){o.addEventListener(t,i,!1)}),this.contextMenuTemplate=[],this.contextMenuTemplate.push({description:Lt.contextMenuCortonaProperties,action:Nt.scene.viewer3d?function(){Nt.scene.viewer3d.instance.uiAction("preferences")}:null}),!Lt.options.UsePlugins&&Lt.options.FPS&&this.contextMenuTemplate.push({description:Lt.showFPS,action:P}),this.contextMenuTemplate.push(null),this.contextMenuTemplate.push({description:Lt.contextMenuAbout,action:x}),this.scene.add(cortona3d.factory.popupmenu.setMenuTemplate(this.contextMenuTemplate));var r=cortona3d.RGB(255,255,255);try{r=parseInt(Lt.options.Background3DColor.substr(5,2)+Lt.options.Background3DColor.substr(3,2)+Lt.options.Background3DColor.substr(1,2),16),this.control.instance.style.backgroundColor=Lt.options.Background3DColor}catch(t){}if("viewer3d"==this.control.factory.type){var s={BackColor:r,GradientBackColor:r,Skin:Nt.control.factory.skins.review,ConsoleMode:0,ContextMenu:!1,ShowLogo:!1,LoadDroppedScene:!1,HeadLight:!0,NavigationBar:0,RendererHints:5168,RendererOptimization:0,TravelSpeed:2,viewpoint_transition_mode:0,WaitForAllResources:!0,PixelBufferAccess:!0,MuteSound:2};if(Lt.options.forceDirectX&&(s.RendererName="DirectX Renderer"),cortona3d.expand(this.control.instance,s),lt=this.control.instance,lt.uiAction("revokePropPage:{E5711FD5-464F-11D3-9D7D-00A0247A5F3F}"),lt.uiAction("revokePropPage:{EC48A005-4978-11D3-9D7E-00A0247A5F3F}"),lt.uiAction("revokePropPage:{E5711FD4-464F-11D3-9D7D-00A0247A5F3F}"),(parseInt(lt.Version)||6)<8)return this.scene.add(cortona3d.factory.error),this.control=this.scene.error,void this.control.message(Lt.warningCortonaOldVersion)}this.api_initialize(),at=this.api},eventsHandler:function(t){function e(){}var n=!0;switch(t.type){case"OnReady":Nt.control.solo.core.printErr;Nt.control.solo.core.printErr=function(){var t=Array.prototype.slice.call(arguments).join("");alert(t),Nt.control.solo.core.printErr=e},Nt.control.solo.core.setStatus=e;break;case"OnSceneLoaded":Nt.scene.loading.hide(),t.detail.raw[0]?(Lt.options.ForceFPS&&(Nt.scene.add(cortona3d.factory.fps),Nt.scene.fps.show()),Nt.loaded=!0,Nt.control.show(),Bt.viewFigure.enableControlsGroup(),Bt.viewDocument.link3dNode&&Bt.viewDocument.handlers.link3d.call(Bt.viewDocument.link3dNode)):(delete Nt.url,Nt.control.reason&&(Nt.scene.add(cortona3d.factory.error),Nt.scene.error.message(Nt.control.reason)));break;case"MouseDown":Nt.mouseButton=t.detail.raw[0],Nt.scene.popupmenu.hide(),$.apply(null,t.detail.raw);break;case"MouseUp":var i=(t.detail.raw[0],t.detail.raw[2]),o=t.detail.raw[3];2==Nt.mouseButton&&(!Lt.options.UsePlugins&&Lt.options.FPS&&(Nt.contextMenuTemplate[Nt.contextMenuTemplate.length-3].description=Nt.scene.fps?Lt.hideFPS:Lt.showFPS,Nt.scene.remove(cortona3d.factory.popupmenu),Nt.scene.add(cortona3d.factory.popupmenu.setMenuTemplate(Nt.contextMenuTemplate))),Nt.scene.popupmenu.setPosition(i,o).show(),window.focus()),J.apply(null,t.detail.raw);break;case"MouseMove":Q.apply(null,t.detail.raw);break;case"OnMouseOut":tt.apply(null,t.detail.raw);break;case"OnSeekChanged":Nt.api.vcr_set_proc_fraction.apply(Nt.api,t.detail.raw);break;case"OnObjectVMMove":case"OnFrameRateMeasured":case"OnCameraMove":return n;case"OnAlertActivated":vt=!0,Nt.scene.popupmenu.hide(),Bt.viewFigure.disableControlsGroup(),Nt.scene.viewer3d&&(Nt.scene.viewer3d.instance.InputDevices=0);break;case"OnAlertDismiss":vt=!1,Bt.viewFigure.enableControlsGroup(),Nt.scene.viewer3d&&(Nt.scene.viewer3d.instance.InputDevices=255);break;case"OnAlertClosed":vt=!1,d()}t.type+"("+(t.target.id||t.target.localName)+"): "+t.detail.raw.map(function(t){if(t&&void 0!==t.toString)return t.toString();switch(typeof t){case"string":case"number":case"boolean":return t;default:return typeof t}});return n},seekEventHandler:function(t){var e=(this.value-this.min)/(this.max-this.min);setTimeout(function(){Nt.api.vcr_set_proc_fraction(e,"change"==t.type)},0)},api_initialize:function(){this.api=new cortona3d.interfaces[Nt.control.factory.type].SimulationAPI(Nt.control),cortona3d.expand(this.api,{on_simulation_load:function(t){if(ct=t,t){Wt=new q(Nt.control,docItems),Nt.api.set_ui_axis(axis_flag),Nt.api.set_ui_zoom(zoom_flag),Nt.api.set_ui_vcr(vcr_flag),Nt.api.set_ui_smoothcontrol(smoothcontrol_flag),V(),document.getElementById("btn_stop").style.fontWeight="bold",document.getElementById("warningbox").disabled=!1,document.getElementById("speed1").disabled=!1,document.getElementById("speed2").disabled=!1,document.getElementById("speed3").disabled=!1,document.getElementById("previewmode").disabled=!1,document.getElementById("jobmode").disabled=!1,pmibox_checked===!1&&rt(pmibox_checked),document.getElementById("pmibox")&&(document.getElementById("pmibox").disabled=!1);try{document.getElementById("vpfreeze")&&(document.getElementById("vpfreeze").disabled=!1,document.getElementById("vpfreeze").checked=!1)}catch(t){}c(),u(),steps_list.length>0&&(L(steps_list[0]),S()),propIsActiveFocus&&setTimeout(function(){try{document.getElementById("btn_play").focus()}catch(t){}},0)}else ot(iWarningUnsupportedFile)},on_vcr_state:function(t){for(var e=(Nt.api.state,new Array(document.getElementById("btn_stop"),document.getElementById("btn_play"),document.getElementById("btn_pause"))),n=0;n<e.length;n++)e[n].style.fontWeight=t==n?"bold":"normal";if(t!=at.PLAY&&vt&&1==at.vcr_get_fraction()&&at.vcr_set_fraction(1),propIsActiveFocus)try{t!=at.PLAY?document.getElementById("btn_play").focus():document.getElementById("btn_pause").focus()}catch(t){}},on_events_out:function(t){if(t.length>0){for(var e=!document.getElementById("warningbox").checked,n=0;n<t.length;n++)!e&&m(t[n])&&ft.push(t[n]);ft.length&&(l(),f())}},on_start_new_substep:function(t,e,n){e=e||w(n),b(n),A(e),L(e)},on_proc_fraction_changed:function(t){var e=document.getElementById("seek");if(e){var n=parseFloat(e.min),i=parseFloat(e.max);e.value=t*(i-n)+n}}})},simulate:function(t,e){var n=getActions(t);n.length>0||t==Lt.simulation_steps[0]?(activeElement=getElement(t),Bt.viewDocument.highlight(),n.length>0&&(Nt.api.vcr_set_range(n[0],n[n.length-1]),Nt.api.vcr_stop()),checkNextPrev(),e&&Nt.api.vcr_play()):(Bt.setTitle(),activeElement=null,cortona3d.app.error(Lt.TXT_STEP_NOT_FOUND+" "+t))},fit3D:function(t){Nt.api&&(t instanceof Array?Nt.api.fit_to_objects(t):t.indexOf(" ")==-1?Nt.api.fit_to_object(t):Nt.api.fit_to_objects(t.split(" ")))},flash3D:function(t){Nt.api&&(t instanceof Array?Nt.api.flash_nodes(t):t.indexOf(" ")==-1?Nt.api.flash_node(t):Nt.api.flash_nodes(t.split(" ")))},locate3DObjects:function(t){this.fit3D(t),setTimeout(function(){Nt.flash3D(t)},750)}}));var r=n(48)(Lt);Mt=r.viewer3D[0],Ot=r.viewer2D[0],Ft=Mt,At={svg:-1,viewer2d:1,isoview:2}[Ot],xt="x3dom"==Ft,Pt="viewer3d"==Ft,Vt=!Pt&&!xt,Nt.setup(r.viewer3D),Dt.setup(r.viewer2D),window.onblur=t,window.onmousedown=t,window.onkeydown=t,window.onresize=function(){Nt.scene&&Nt.scene.popupmenu&&Nt.scene.popupmenu.hide(),Dt.scene&&Dt.scene.popupmenu&&Dt.scene.popupmenu.hide(),Nt.scene&&Nt.scene.alert&&Nt.scene.alert.onresize()},Nt.load(propSceneName),_t||(document.getElementById("warningbox").checked=warningbox_checked,document.getElementById("speed2").checked=!0,document.getElementById("previewmode").checked=!0,document.getElementById("pmibox")&&(document.getElementById("pmibox").checked=pmibox_checked),R(),C(!0),S())}function s(){a()}function a(){ct=!1,ft=[],l(),document.getElementById("btn_stop").style.fontWeight="normal";try{lt.style.visibility="hidden"}catch(t){}vt=!1}function c(){try{Ct.nav_roll=!Lt.options.UpRight,Ct.align=!Lt.options.UpRight;for(var t,e=Nt.control.instance,n=[],i=e.Engine.Nodes.Item("_SKIN_INFO"),o=i.Fields.Item("info"),r=0;r<o.Count;r++)for(t in Ct)if(o.GetValue(r).indexOf(t+"=")>=0){o.SetValue(r,t+"="+Ct[t]),n.push(t);break}for(t in Ct){var s=!1;for(var a in n)a==t&&(s=!0);s||o.Add(t+"="+Ct[t])}}catch(t){}}function l(){document.getElementById("btn_pause").disabled=!0,document.getElementById("btn_play").disabled=!0,document.getElementById("btn_stop").disabled=!0,document.getElementById("btn_signoff").disabled=!0,lt&&(lt.InputDevices=0),C(!0)}function u(){document.getElementById("btn_pause").disabled=!1,document.getElementById("btn_play").disabled=!1,document.getElementById("btn_stop").disabled=!1,document.getElementById("btn_signoff").disabled=0===gt,lt&&(lt.InputDevices=255),0===gt&&C(!1)}function d(){setTimeout(function(){p(!0)},0)}function h(){vt&&p(!1)}function p(t){var e;if(1==gt&&mt&&"INSPECT"==mt.type){var n=steps_list.length-1;for(e=0;e<steps_list.length;e++)if(yt==steps_list[e]&&steps_list.length>e+1){n=e;break}var i=new Date,o=document.getElementById("in_sp_"+n);o&&(o.innerHTML=iInspectPrefix+i.toLocaleString(),o.className="inspSpan")}mt=null,t?(document.getElementById("warningbox").checked||(ft=[]),ft.length>0?f():(u(),Tt&&at.vcr_play_ext())):u()}function f(){var t=!document.getElementById("warningbox").checked;if(t)ft=[],mt=null,u();else if(!vt){var e=ft.shift();mt=e;var n=(e.id.split("-")[0].toUpperCase(),"custom"),i=e.type,o=e.description;"INSPECT"==e.type&&(i="",o=iMsgInspect),Nt.scene.alert.alertFooter.firstChild.textContent=window.iMessageCloseButton,Nt.scene.alert.message(n,i,o).show(),g()}}function m(t){for(var e=0;e<eventsArray.length;e++)if(eventsArray[e].id==t.info)return t.description=eventsArray[e].description,t.type=eventsArray[e].type,!0;return!1}function v(){Tt&&at.vcr_play()}function _(){ft=[],at.vcr_stop()}function g(){at.vcr_pause()}function y(t){at.set_freeze_viewpoint(t)}function b(t){if(Rt){Rt.className="step";var e=document.getElementById(Rt.id.replace(/n_step_/,"n1_step_"));e&&(e.className="step"),Rt=null}for(var n=0;n<actions_list.length;n++)if(actions_list[n][0]==t){for(var i=actions_list[n],o=i.length-1;o>1;o--)if(Rt=E("m","n_step_"+items_list[i[o]])){E("n",Rt.id.replace(/n_step_/,"n1_step_"));break}break}}function w(t){for(var e=0;e<actions_list.length;e++)if(actions_list[e][0]==t)return steps_list[actions_list[e][1]]}function E(t,e){var n=document.getElementById(e);return n&&(n.className=t+"step",n.style.marginTop="-5px",n.scrollIntoView(!0),n.style.marginTop=""),n}function T(t,e){for(var n=0;n<steps_list.length;n++)if(steps_list[n]==t){Ht||!e||Rt||document.getElementById("s_"+n).scrollIntoView(!1),I("s_"+n,e);try{document.getElementById("spanSequence")&&(document.getElementById("spanSequence").innerHTML=n+1)}catch(t){}break}}function I(t,e){try{var n=document.getElementById(t);if(n&&n.cells)for(var i,o=0;o<n.cells.length;o++)i=ut?n.cells(o):n.cells[o],i.style.color=e?propTableSelectedColor:"",i.style.backgroundColor=e?propTableSelectedBackgroundColor:""}catch(t){}}function C(t){isBlocked=t;var e=isBlocked?"":"pointer";t&&Nt.scene.popupmenu&&Nt.scene.popupmenu.close();for(var n=0;n<document.styleSheets.length;n++){var o=ut?document.styleSheets[n].rules:document.styleSheets[n].cssRules;if(o)for(i=0;i<o.length;i++)".cellnormal"==o[i].selectorText&&(o[i].style.cursor=e)}}function S(){actions_list.length>0&&b(actions_list[0][0]),steps_list.length>0&&A(steps_list[0])}function A(t){""!==kt&&T(kt,!1),kt=t,T(t,!0),Ht=!1}function F(t){if(isBlocked||Ut)return void(Ut=null);try{if(steps_list[t].length>0)if(Ht=!0,at.vcr_set_position(steps_list[t]),Tt)bt&&!isBlocked&&(jt=setTimeout(v,500));else if(imgArray[t].length>0){for(var e=!0,n=0;n<imgArray[t].length;n++)if(imgArray[t][n]==It){e=!1;break}e&&nt(imgArray[t][0])}else nt(resFolder+"empty.cgm")}catch(t){}}function O(){try{Yt&&Yt.close()}catch(t){}Yt=window.open(resFolder+helpFile,"","statusbar=no,resizable=yes,scrollbars=yes,width=750,height=600")}function M(){var t=Lt.ExporterVersionNumber;return t+="-"+st}function x(){var t="";t+="\n"+Lt.aboutCortonaVersion+" "+Nt.control.version(),t+="\n"+Lt.aboutCgmViewerVersion+" "+Dt.control.version(),alert(Lt.aboutDocumentVersion+" "+M()+t)}function P(){var t=Nt.scene;t.fps?t.remove(t.fps):(t.add(cortona3d.factory.fps),t.fps.show())}function V(){for(var t={},e=[],n=0;n<docItems.length;n++)document.getElementById("itm"+docItems[n].objectID)&&(e.push(docItems[n]),t[docItems[n].node]=docItems[n]);for(n=0;n<e.length;n++)e[n].pr=e[n].parent?t[e[n].parent]:null,e[n].ch=[],e[n].u=!1;var i;for(var o in zt){var r=zt[o],s=1e8,a=null;for(n=0;n<r.length;n++)s>r[n].ind&&(s=r[n].ind,a=r[n]);a&&(a.u=!0)}for(n=0;n<e.length;n++)for(i=e[n];i.pr&&i.u;){if(i.pr.u){i.pr.ch.push(i);break}i.ind--,i.pr=i.pr.pr}var c=[];for(n=0;n<e.length;n++)i=e[n],0===i.ind&&i.u&&(i.ch.length>0?c=[i].concat(c):c.push(i));var l=D(c);document.getElementById("divContainerBOM").innerHTML=l}function D(t){for(var e='<table class="treePart">',n="0"==propBOMStyle?Et:wt,i="0"==propBOMStyle?"":'style="display:none;"',o=0;o<t.length;o++){var r=t[o],s=document.getElementById("itm"+r.objectID);s&&(e+="<tr>",e+=r.ch.length>0?'<td class="pmBom"><span class="btnPM" id="btn'+r.objectID+'" onclick="processCh(\''+r.objectID+"')\">"+n+"</span></td>":'<td class="npBom"></td>',e+='<td class="bompart" onclick="fit3D(\''+r.node+"');\" onmouseover=\"on_over('"+r.objectID+"', '"+r.node+"');\" onmouseout=\"on_out('"+r.objectID+"', '"+r.node+'\');"><div id="bom'+r.objectID+'" class="divpart">',e+=s.innerHTML+"</div></td></tr>",r.ch.length>0&&(e+='<tr id="bch'+r.objectID+'" '+i+'><td class="npBom"></td><td class="bomchildren">'+D(r.ch)+"</td></tr>"))}return e+="</table>"}function N(t){var e=document.getElementById("bch"+t);e&&(""===e.style.display?(e.style.display="none",window.event.srcElement.innerText=wt):(e.style.display="",window.event.srcElement.innerText=Et))}function L(t){if(Xt!=t){for(Xt=t,B(t),o=0;o<steps_list.length;o++)if(steps_list[o]==t){document.getElementById("divCurStep").innerHTML="<table class='curStepTbl' width='100%'><tr id='trCurStep' class='cellnormal'>"+document.getElementById("s_"+o).innerHTML.replace(/fx_fx_/,"dx_").replace(/in_sp_/,"ix_").replace(/n_step_/g,"n1_step_")+"</tr></table>";var e=document.getElementById("trCurStep");if(e&&e.cells)for(var n,i=0;i<e.cells.length;i++)n=ut?e.cells(i):e.cells[i],n.style.color="",n.style.backgroundColor="";break}for(var o=0;o<steps_list.length;o++)if(steps_list[o]==t){inspArray[o]&&(jt&&(clearTimeout(jt),jt=null),ft.push({id:"",type:"INSPECT",description:""}),l(),f());break}}}function B(t){var e,n,i,o,r={},s=[];for(i=0;i<steps_list.length;i++)if(t==steps_list[i]){for(var a=prtArray[i],c=0;c<a.length;c++)""!==a[c]&&a[c]in zt&&!(a[c]in r)&&(r[a[c]]=zt[a[c]],s.push(zt[a[c]]));break}var l='<table class="tblPart" style="width:100%;">';for(i=0;i<s.length;i++)e=s[i][0].objectID,n=document.getElementById("itm"+e),n&&(o=s[i][0].node,l+='<tr><td id="prt'+e+'" onclick="fit3D(\''+o+"');\" onmouseover=\"on_over('"+e+"', '"+o+"');\" onmouseout=\"on_out('"+e+"', '"+o+"');\">",l+=n.innerHTML,l+="</td></tr>");for(l+="</table>",document.getElementById("divCurParts").innerHTML=l,l='<table class="tblPart" style="width:100%;">',i=0;i<s.length;i++)e=s[i][0].objectID,n=document.getElementById("rsr"+e),n&&(o=s[i][0].node,l+='<tr><td id="prt'+e+'" onclick="fit3D(\''+o+"');\" onmouseover=\"on_over('"+e+"', '"+o+"');\" onmouseout=\"on_out('"+e+"', '"+o+"');\">",l+=n.innerHTML,l+="</td></tr>");l+="</table>",document.getElementById("divCurRes").innerHTML=l}function R(){for(var t=0;t<docItems.length;t++)docItems[t].docID in zt?zt[docItems[t].docID].push(docItems[t]):zt[docItems[t].docID]=[docItems[t]],Gt[docItems[t].objectID]=zt[docItems[t].docID]}function k(t){if(t in Gt)for(var e=Gt[t],n=0;n<e.length;n++)if(e[n].u&&document.getElementById("bom"+e[n].objectID)||document.getElementById("rsr"+e[n].objectID))return e[n];return null}function H(t){for(var e=[],n=0;n<docItems.length;n++)if(docItems[n].node==t){for(var i=zt[docItems[n].docID],o=0;o<i.length;o++)e.push(i[o].node);break}return e}function j(t){at&&(it(),Nt.fit3D(H(t))),X()}function Y(t){if(at)for(var e=0;e<docItems.length;e++)if(docItems[e].docID==t){var n=H(docItems[e].node);it(),Nt.locate3DObjects(n);break}X()}function X(){ut?(window.event.cancelBubble=!0,window.event.returnValue=!1):(Ut&&clearTimeout(Ut),Ut=setTimeout(z,500))}function z(){Ut=null}function G(t){try{var e=k(t);if(e){for(var n=e.objectID,i=e.pr;i;){var o=document.getElementById("bch"+i.objectID);o&&(o.style.display="",document.getElementById("btn"+i.objectID).innerText=Et),i=i.pr}document.getElementById("bom"+n)&&document.getElementById("bom"+n).scrollIntoView(!1),document.getElementById("prt"+n)&&document.getElementById("prt"+n).scrollIntoView(!1)}}catch(t){}}function U(t,e,n){if(at){for(var i=H(e),o=!1,r=0;r<i.length;r++)if(at.checkVisibility(i[r])){o=!0;break}var s=o?"#FFFF99":"#FF9999",a=k(t);if(a){var c=a.objectID,l=document.getElementById("bom"+c);if(l&&(l.style.backgroundColor=s),n)for(var u=a.pr;u;)l=document.getElementById("bom"+u.objectID),l&&(l.style.backgroundColor=s),u=u.pr;l=document.getElementById("prt"+c),l&&(l.style.backgroundColor=s),l=document.getElementById("rsr"+c),l&&(l.style.backgroundColor=s),at.set_emissiveColor(i,.5,.5,.5)}}}function W(t,e){if(at){var n=k(t);if(n){var i=n.objectID,o=document.getElementById("bom"+i);o&&(o.style.backgroundColor="");for(var r=n.pr;r;)o=document.getElementById("bom"+r.objectID),o&&(o.style.backgroundColor=""),r=r.pr;o=document.getElementById("prt"+i),o&&(o.style.backgroundColor=""),o=document.getElementById("rsr"+i),o&&(o.style.backgroundColor="");var s=H(e);at.set_emissiveColor(s,0,0,0)}}}function Z(t){h(),gt=t,document.getElementById("btn_signoff").disabled=0===t,C(0!==t),1==t?steps_list.length>0&&(yt=steps_list[0],at.vcr_goto(yt),bt&&setTimeout(v,500)):at.vcr_goto(procId),Tt||nt(imgArray[0].length>0?imgArray[0][0]:resFolder+"empty.cgm")}function K(){h();var t=steps_list.length-1;yt==steps_list[t]&&(document.getElementById("btn_signoff").disabled=!0);for(var e=0;e<steps_list.length;e++)if(yt==steps_list[e]&&steps_list.length>e+1){t=e,yt=steps_list[e+1],at.vcr_goto(yt),Tt||nt(imgArray[e+1].length>0?imgArray[e+1][0]:resFolder+"empty.cgm"),bt&&setTimeout(v,500);break}var n=new Date,i=document.getElementById("fx_fx_"+t);i&&(i.innerHTML=iSignOffPrefix+n.toLocaleString(),i.className="prfxSpan")}function q(t,e){if(Wt)return Wt;"viewer3d"===t.factory.type?(this.cortona=t.instance,this.tooltipIn3D=new et):(this.solo=t.solo,this.tooltipIn3D={_t:null,hide:function(){Nt.scene.container.removeAttribute("title"),clearTimeout(this._t)},setTooltipHTML:function(t){this._t=setTimeout(function(){Nt.scene.container.title=t.replace(/<br>/g,"\n").replace(/(^[\s\n]+|[\s\n]+$)/g,"")},0)},show:function(){},setXY:function(){}}),this._tooltip_timeout=null,this._last_x=-1,this._last_y=-1,this._last_button=0,this._down_x=-1,this._down_y=-1,this.ENABLE_TOOLTIPS=!0,this.MOUSE_MOVE_SENSITIVITY=3,this.TOOLTIP_DELAY=500,this.SKIP_TRANSPARENT_SHAPES=!0,this.SKIP_TRANSPARENCY_THRESHOLD_LEVEL=0,this.items={};for(var n=0;n<e.length;n++)this.items[e[n].node]=e[n];this._lastOverObject=null,q.prototype.skipAndPick=function(t,e){function n(t){var e=null;if(t.Count>0)for(var n=t.Count-1;"Shape"==t.GetValue(n).TypeName&&n>=0;n--){e=t.GetValue(n);break}return e}var i=[];if(this.cortona){var o=this.cortona.Engine,r=o.Pick(t,e);try{for(var s=n(r),a=1e3;a>0&&this.SKIP_TRANSPARENT_SHAPES&&s&&s.Fields.Item("appearance").Value.Fields.Item("material").Value.Fields.Item("transparency").Value>this.SKIP_TRANSPARENCY_THRESHOLD_LEVEL;)a--,o.AddSkipNode(s),r=o.Pick(t,e),s=n(r)}catch(t){r=o.CreateField("MFNode")}try{o.ClearSkipNodes();for(var c=r.Count-1;c>=0;c--)"ObjectVM"==r.GetValue(c).TypeName&&r.GetValue(c).Name in this.items&&i.push(this.items[r.GetValue(c).Name])}catch(t){}}else{var l=this.solo.app.pickObject(t,e,!1);if(l){var u=this.items[l.name];u&&i.push(u)}}return i},q.prototype.vec2ln=function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},q.prototype.clearHLight=function(){this._last_over_object&&(W(Wt._last_over_object.objectID,Wt._last_over_object.node),this._last_over_object=null)},q.prototype.reset=function(){try{clearTimeout(this._tooltip_timeout),this.tooltipIn3D.hide(),this.tooltipIn3D.setXY(0,0)}catch(t){}try{this.cortona.Engine.ClearSkipNodes()}catch(t){}this._last_x=0,this._last_y=0,this._last_button=-1,this.clearHLight(),this._tooltip_timeout=null}}function $(t,e,n,i){Wt&&(vt||(clearTimeout(Wt._tooltip_timeout),Wt.tooltipIn3D.hide(),Wt._last_button=t,Wt._down_x=n,Wt._down_y=i))}function J(t,e,n,i){if(Wt&&!vt&&(2==Wt._last_button&&0===t&&(Wt._last_button=0),1==Wt._last_button&&0===t)){Wt._last_button=0;var o=Wt.skipAndPick(n,i);o.length>0&&G(o[0].objectID)}}function Q(t,e,n,i){if(Wt&&!vt)if(0===t&&Wt.vec2ln(n,i,Wt._last_x,Wt._last_y)>Wt.MOUSE_MOVE_SENSITIVITY){var o=Wt.skipAndPick(n,i);o.length>0?Wt._last_over_object!=o[0]&&(Wt.clearHLight(),Wt._last_over_object=o[0],U(Wt._last_over_object.objectID,Wt._last_over_object.node,!0),Wt.tooltipIn3D.setTooltipHTML(Wt._last_over_object.tooltip)):(Wt.clearHLight(),Wt._last_over_object=null,Wt.tooltipIn3D.setTooltipHTML("")),Wt._last_x=n,Wt._last_y=i,Wt.tooltipIn3D.setXY(n,i),clearTimeout(Wt._tooltip_timeout),lt&&Wt.tooltipIn3D.hide(),Wt.ENABLE_TOOLTIPS&&(Wt._tooltip_timeout=setTimeout(function(){Wt.tooltipIn3D.show()},Wt.TOOLTIP_DELAY))}else 0!==t&&Wt.vec2ln(n,i,Wt._last_x,Wt._last_y)>Wt.MOUSE_MOVE_SENSITIVITY&&(Wt.clearHLight(),1==Wt._last_button&&(Wt._last_button=0))}function tt(){Wt&&(vt||Wt.reset())}function et(){this.tooltipHTML="",this.groupNode=null,this.x=0,this.y=0,this.TOOLTIP_DX=15,this.TOOLTIP_DY=20,et.prototype.show=function(){if(Wt&&""!==this.tooltipHTML&&(0!==this.x||0!==this.y)){var t=Wt.cortona.Engine;this.groupNode||(this.groupNode=t.CreateVrmlFromString("Group{}").GetValue(0),t.RootNodes.Add(this.groupNode));var e=Wt.cortona.clientWidth,n=Wt.cortona.clientHeight,i='Panel{top "-500" left "-500" source HTMLText{body "<font face=\\"tahoma, sans-serif\\" color=\\"#000000\\">'+this.tooltipHTML+'</font>" padding [3, 3, 3, 3]}borderSize 1}',o=t.CreateVrmlFromString(i).GetValue(0);this.groupNode.Fields.Item("children").Add(o);var r=o.Fields.Item("contentSize"),s=r.GetValue(0)+2,a=r.GetValue(1)+2;this.groupNode.Fields.Item("children").Clear();var c=this.x+this.TOOLTIP_DX,l=this.y+this.TOOLTIP_DY;c+s>e&&(c=this.x-this.TOOLTIP_DX-s),l+a>n&&(l=this.y-this.TOOLTIP_DY-a),i='Panel{left "'+c+'" top "'+l+'" width "'+s+'" height "'+a+'" source HTMLText{body "<font face=\\"tahoma, sans-serif\\" color=\\"#000000\\">'+this.tooltipHTML+'</font>" padding [3, 3, 3, 3]}backgroundTransparency 0 backgroundColor 1 1 .87 borderColor 0 0 0 borderSize 1}',o=t.CreateVrmlFromString(i).GetValue(0),this.groupNode.Fields.Item("children").Add(o)}},et.prototype.hide=function(){this.groupNode&&this.groupNode.Fields.Item("children").Clear()},et.prototype.setTooltipHTML=function(t){this.tooltipHTML=t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},et.prototype.setXY=function(t,e){this.x=t,this.y=e}}function nt(t){h(),Dt.show(),Dt.load(t),It=t,Tt=!1,g(),document.getElementById("cntr3D1").style.display="none",document.getElementById("cntr3D2").style.display="none",document.getElementById("cntr2D").style.display="",Zt||X()}function it(){Nt.show(),document.getElementById("cntr3D1").style.display="",document.getElementById("cntr3D2").style.display="",document.getElementById("cntr2D").style.display="none",Tt=!0}function ot(t){""!==t&&alert(t)}function rt(t){lt&&(lt.Engine.AutoRefresh=0),pmiArray.forEach(function(e){if(lt)lt.Engine.Nodes.Item(e).Fields.Item("whichChoice").Value=t?0:-1;else{var n=at.solo.app,i=n.getObjectWithName(e);n.setObjectPropertyf(i,n.PROPERTY_VISIBILITY,!1,t?0:-1)}}),lt&&(lt.Engine.AutoRefresh=1)}var st="0.49",at=null,ct=!1,lt=null,ut=!0,dt=!1,ht=!1,pt=!1,ft=[],mt=null,vt=!1,_t=!1,gt=0,yt="",bt=!0,wt="+",Et="",Tt=!0,It="",Ct={spin:!0,pan:!0,zoom:!0,fit:!1,setcenter:!0,skipsensors:!0,nav_roll:!0,align:!0},St=1,At=1,Ft="viewer3d",Ot="viewer2d",Mt="viewer3d",xt=!1,Pt=!1,Vt=!Pt&&!xt,Dt=null,Nt=null,Lt={langID:window.langID,options:{FPS:window.showFPSSelector,ForceFPS:window.forceFPSIndicator,UsePlugins:window.usePlugins,Background3DColor:window.propBackground3DColor,forceDirectX:window.forceDirectX,UpRight:window.propUpRight},propInteractivityName:window.interactivityXml,aboutDocumentVersion:window.TXT_ABOUT_DOCUMENT,aboutCortonaVersion:window.TXT_ABOUT_CORTONA,aboutCgmViewerVersion:window.TXT_ABOUT_CGM,ExporterVersionNumber:window.exporterVersion,contextMenuCortonaProperties:window.iContextMenuCortonaProperties,contextMenuAbout:window.iContextMenuAbout,warningCortonaOldVersion:window.iWarningCortonaOldVersion,TXT_OOPS_IDIDITAGAIN:window.iGenericErrorMessage,TXT_VIEWER_UNAVAILABLE:window.iViewerUnavailable,TXT_CMENU_VIEWER2D_BESTFIT:window.TXT_CMENU_VIEWER2D_BESTFIT,TXT_CMENU_VIEWER2D_ZOOMIN:window.TXT_CMENU_VIEWER2D_ZOOMIN,TXT_CMENU_VIEWER2D_ZOOMOUT:window.TXT_CMENU_VIEWER2D_ZOOMOUT,showFPS:window.iShowFPS,hideFPS:window.iHideFPS},Bt={showFigure:function(t){document.getElementById("scene2d").style.visibility="2d"===t?"visible":"",document.getElementById("scene3d").style.visibility="3d"===t?"visible":"",Tt="3d"===t},viewFigure:{getScene:function(t){return cortona3d.scene("scene"+t)},enableControlsGroup:function(){Nt.control.range&&(Nt.control.range.disabled=!1)},disableControlsGroup:function(){Nt.control.range&&(Nt.control.range.disabled=!0)}},viewDocument:{}},Rt=null,kt="",Ht=!1,jt=null,Yt=null,Xt="",zt={},Gt={},Ut=null,Wt=null,Zt=!1;t.exports={error:function(t,e,n,i,o){if("TiramisuLoadingError"==o.name?o.figure=Nt:"FigureLoadingError"==o.name||o.figure||(o.figure=Nt),o.figure){o.figure.scene.error&&o.figure.scene.remove(cortona3d.factory.error),o.figure.scene.add(cortona3d.factory.error),o.figure.control=o.figure.scene.error;var r=[Lt.TXT_OOPS_IDIDITAGAIN,"Figure"+o.figure.prefix.toUpperCase()+": "+t];(e||n||i)&&r.push(e+" ("+n+"/"+i+")"),o.figure.control.message.apply(o.figure.control,r).show(),o.figure.scene.loading.hide()}},on_tab_click:F,setSignOff:K,setFreezeVP:y,setSpeedRatio:function(t){at.set_speed_ratio(t)},play:v,pause:g,stop:_,hfit3D:Y,fit3D:j,on_over:U,on_out:W,show2D:nt,show3D:it,processCh:N,setRWIMode:Z,showPMI:rt,showAbout:x,showHelp:O,showCortonaProperties:function(){ipcApi.showCortonaProperties()},onLoad:o,onUnload:s,figure2D:Dt,figure3D:Nt,procedureApp:Bt}},function(t,e){},,,,function(t,e){t.exports=function(t){var e={viewer2D:t.options.UsePlugins?["viewer2d","isoview"]:["svg","iframe"],viewer3D:t.options.UsePlugins?["viewer3d"]:["solo"]};return"undefined"!=typeof t.options.Viewer2DType&&(e.viewer2D={0:["viewer2d","isoview","svg","iframe"],1:["viewer2d"],2:["isoview"],3:["svg"],4:["iframe"]}[t.options.Viewer2DType]),"undefined"!=typeof t.options.Viewer3D&&(e.viewer3D={auto:["viewer3d","solo"],viewer3d:["viewer3d"],solo:["solo"],x3dom:["x3d"]}[t.options.Viewer3D]),e}},function(t,e,n){document.addEventListener("DOMContentLoaded",function(){n.p=(window.publicFolder||window.resFolder||".").replace(/\/+$/,"")+"/",window.Cortona3DSolo={config:n(50)},window.Cortona3DSolo.config.TOTAL_MEMORY=Math.max(16777216,1024*window.totalMemory*1024),document.body.onload=cortona3d.app.onLoad,document.body.onbeforeunload=cortona3d.app.onUnload,window.onerror=function(t,e,n,i,o){cortona3d.app.error.call(null,t,e,n,i,o||new Error(t))}},!1)},function(t,e,n){t.exports={locateFile:function(t){return n.p+t},TOTAL_MEMORY:window&&window.TOTAL_MEMORY||134217728
}}]);